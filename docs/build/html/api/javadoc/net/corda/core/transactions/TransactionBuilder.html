<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_121) on Thu Mar 02 15:43:01 GMT 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TransactionBuilder</title>
<meta name="date" content="2017-03-02">
<meta name="keywords" content="net.corda.core.transactions.TransactionBuilder class">
<meta name="keywords" content="getTime()">
<meta name="keywords" content="copy()">
<meta name="keywords" content="setTime()">
<meta name="keywords" content="withItems()">
<meta name="keywords" content="getCurrentSigs()">
<meta name="keywords" content="signWith()">
<meta name="keywords" content="checkAndAddSignature()">
<meta name="keywords" content="checkSignature()">
<meta name="keywords" content="addSignatureUnchecked()">
<meta name="keywords" content="toWireTransaction()">
<meta name="keywords" content="toSignedTransaction()">
<meta name="keywords" content="addInputState()">
<meta name="keywords" content="addAttachment()">
<meta name="keywords" content="addOutputState()">
<meta name="keywords" content="addCommand()">
<meta name="keywords" content="inputStates()">
<meta name="keywords" content="outputStates()">
<meta name="keywords" content="commands()">
<meta name="keywords" content="attachments()">
<meta name="keywords" content="getType()">
<meta name="keywords" content="getNotary()">
<meta name="keywords" content="setNotary()">
<meta name="keywords" content="getInputs()">
<meta name="keywords" content="getAttachments()">
<meta name="keywords" content="getOutputs()">
<meta name="keywords" content="getCommands()">
<meta name="keywords" content="getSigners()">
<meta name="keywords" content="getTimestamp()">
<meta name="keywords" content="setTimestamp()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TransactionBuilder";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/transactions/TraversableTransaction.html" title="interface in net.corda.core.transactions"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/transactions/TransactionBuilder.html" target="_top">Frames</a></li>
<li><a href="TransactionBuilder.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.corda.core.transactions</div>
<h2 title="Class TransactionBuilder" class="title">Class TransactionBuilder</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>net.corda.core.transactions.TransactionBuilder</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../net/corda/core/contracts/NotaryChange.Builder.html" title="class in net.corda.core.contracts">NotaryChange.Builder</a>, <a href="../../../../net/corda/core/contracts/General.Builder.html" title="class in net.corda.core.contracts">General.Builder</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">TransactionBuilder</span></pre>
<div class="block"><p><p>A TransactionBuilder is a transaction class that's mutable (unlike the others which are all immutable). It is
intended to be passed around contracts that may edit it by adding new states/commands. Then once the states
and commands are right, this class can be used as a holding bucket to gather signatures from multiple parties.</p></p><p><p><p>The builder can be customised for specific transaction types, e.g. where additional processing is needed
before adding a state/command.</p></p></p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#TransactionBuilder-type-notary-inputs-attachments-outputs-commands-signers-timestamp-">TransactionBuilder</a></span>(<a href="../../../../net/corda/core/contracts/TransactionType.html" title="type parameter in TransactionType">TransactionType</a>&nbsp;type,
                  <a href="../../../../net/corda/core/crypto/Party.html" title="type parameter in Party">Party</a>&nbsp;notary,
                  java.util.List&lt;net.corda.core.contracts.StateRef&gt;&nbsp;inputs,
                  java.util.List&lt;net.corda.core.crypto.SecureHash&gt;&nbsp;attachments,
                  java.util.List&lt;net.corda.core.contracts.TransactionState&gt;&nbsp;outputs,
                  java.util.List&lt;net.corda.core.contracts.Command&gt;&nbsp;commands,
                  java.util.Set&lt;net.corda.core.crypto.CompositeKey&gt;&nbsp;signers,
                  <a href="../../../../net/corda/core/contracts/Timestamp.html" title="type parameter in Timestamp">Timestamp</a>&nbsp;timestamp)</code>
<div class="block">A TransactionBuilder is a transaction class that's mutable (unlike the others which are all immutable). It is
intended to be passed around contracts that may edit it by adding new states/commands. Then once the states
and commands are right, this class can be used as a holding bucket to gather signatures from multiple parties.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#TransactionBuilder--">TransactionBuilder</a></span>()</code>
<div class="block">A TransactionBuilder is a transaction class that's mutable (unlike the others which are all immutable). It is
intended to be passed around contracts that may edit it by adding new states/commands. Then once the states
and commands are right, this class can be used as a holding bucket to gather signatures from multiple parties.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#addAttachment-attachmentId-">addAttachment</a></span>(<a href="../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;attachmentId)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#addCommand-arg-">addCommand</a></span>(<a href="../../../../net/corda/core/contracts/Command.html" title="type parameter in Command">Command</a>&nbsp;arg)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#addCommand-data-keys-">addCommand</a></span>(<a href="../../../../net/corda/core/contracts/CommandData.html" title="type parameter in CommandData">CommandData</a>&nbsp;data,
          net.corda.core.crypto.CompositeKey&nbsp;keys)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#addCommand-data-keys-">addCommand</a></span>(<a href="../../../../net/corda/core/contracts/CommandData.html" title="type parameter in CommandData">CommandData</a>&nbsp;data,
          java.util.List&lt;? extends net.corda.core.crypto.CompositeKey&gt;&nbsp;keys)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#addInputState-stateAndRef-">addInputState</a></span>(<a href="../../../../net/corda/core/contracts/StateAndRef.html" title="type parameter in StateAndRef">StateAndRef</a>&lt;?&gt;&nbsp;stateAndRef)</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#addOutputState-state-">addOutputState</a></span>(<a href="../../../../net/corda/core/contracts/TransactionState.html" title="type parameter in TransactionState">TransactionState</a>&lt;?&gt;&nbsp;state)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#addOutputState-state-notary-encumbrance-">addOutputState</a></span>(<a href="../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&nbsp;state,
              <a href="../../../../net/corda/core/crypto/Party.html" title="type parameter in Party">Party</a>&nbsp;notary,
              java.lang.Integer&nbsp;encumbrance)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#addOutputState-state-notary-">addOutputState</a></span>(<a href="../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&nbsp;state,
              <a href="../../../../net/corda/core/crypto/Party.html" title="type parameter in Party">Party</a>&nbsp;notary)</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#addOutputState-state-">addOutputState</a></span>(<a href="../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&nbsp;state)</code>
<div class="block">A default notary must be specified during builder construction to use this method</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#addSignatureUnchecked-sig-">addSignatureUnchecked</a></span>(<a href="../../../../net/corda/core/crypto/DigitalSignature.WithKey.html" title="type parameter in DigitalSignature.WithKey">DigitalSignature.WithKey</a>&nbsp;sig)</code>
<div class="block">Adds the signature directly to the transaction, without checking it for validity.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>java.util.List&lt;net.corda.core.crypto.SecureHash&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#attachments--">attachments</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#checkAndAddSignature-sig-">checkAndAddSignature</a></span>(<a href="../../../../net/corda/core/crypto/DigitalSignature.WithKey.html" title="type parameter in DigitalSignature.WithKey">DigitalSignature.WithKey</a>&nbsp;sig)</code>
<div class="block">Checks that the given signature matches one of the commands and that it is a correct signature over the tx, then
adds it.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#checkSignature-sig-">checkSignature</a></span>(<a href="../../../../net/corda/core/crypto/DigitalSignature.WithKey.html" title="type parameter in DigitalSignature.WithKey">DigitalSignature.WithKey</a>&nbsp;sig)</code>
<div class="block">Checks that the given signature matches one of the commands and that it is a correct signature over the tx.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;net.corda.core.contracts.Command&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#commands--">commands</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#copy--">copy</a></span>()</code>
<div class="block">Creates a copy of the builder.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;net.corda.core.crypto.SecureHash&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#getAttachments--">getAttachments</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>java.util.List&lt;net.corda.core.contracts.Command&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#getCommands--">getCommands</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>java.util.ArrayList&lt;net.corda.core.crypto.DigitalSignature.WithKey&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#getCurrentSigs--">getCurrentSigs</a></span>()</code>
<div class="block">The signatures that have been collected so far - might be incomplete!</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>java.util.List&lt;net.corda.core.contracts.StateRef&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#getInputs--">getInputs</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/crypto/Party.html" title="type parameter in Party">Party</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#getNotary--">getNotary</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>java.util.List&lt;net.corda.core.contracts.TransactionState&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#getOutputs--">getOutputs</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>java.util.Set&lt;net.corda.core.crypto.CompositeKey&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#getSigners--">getSigners</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/contracts/Timestamp.html" title="type parameter in Timestamp">Timestamp</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#getTime--">getTime</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/contracts/Timestamp.html" title="type parameter in Timestamp">Timestamp</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#getTimestamp--">getTimestamp</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/contracts/TransactionType.html" title="type parameter in TransactionType">TransactionType</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#getType--">getType</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;net.corda.core.contracts.StateRef&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#inputStates--">inputStates</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>java.util.List&lt;net.corda.core.contracts.TransactionState&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#outputStates--">outputStates</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#setNotary-p-">setNotary</a></span>(<a href="../../../../net/corda/core/crypto/Party.html" title="type parameter in Party">Party</a>&nbsp;p)</code>&nbsp;</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#setTime-time-timeTolerance-">setTime</a></span>(java.time.Instant&nbsp;time,
       java.time.Duration&nbsp;timeTolerance)</code>
<div class="block">Places a <a href="#">TimestampCommand</a> in this transaction, removing any existing command if there is one.
The command requires a signature from the Notary service, which acts as a Timestamp Authority.
The signature can be obtained using <a href="#">NotaryFlow</a>.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#setTime-newTimestamp-">setTime</a></span>(<a href="../../../../net/corda/core/contracts/Timestamp.html" title="type parameter in Timestamp">Timestamp</a>&nbsp;newTimestamp)</code>&nbsp;</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#setTimestamp-p-">setTimestamp</a></span>(<a href="../../../../net/corda/core/contracts/Timestamp.html" title="type parameter in Timestamp">Timestamp</a>&nbsp;p)</code>&nbsp;</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#signWith-key-">signWith</a></span>(java.security.KeyPair&nbsp;key)</code>&nbsp;</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#toSignedTransaction-checkSufficientSignatures-">toSignedTransaction</a></span>(boolean&nbsp;checkSufficientSignatures)</code>&nbsp;</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/WireTransaction.html" title="type parameter in WireTransaction">WireTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#toWireTransaction--">toWireTransaction</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/TransactionBuilder.html#withItems-items-">withItems</a></span>(java.lang.Object&nbsp;items)</code>
<div class="block">A more convenient way to add items to this transaction that calls the add* methods for you based on type</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TransactionBuilder-type-notary-inputs-attachments-outputs-commands-signers-timestamp-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TransactionBuilder</h4>
<pre>public&nbsp;TransactionBuilder(<a href="../../../../net/corda/core/contracts/TransactionType.html" title="type parameter in TransactionType">TransactionType</a>&nbsp;type,
                          <a href="../../../../net/corda/core/crypto/Party.html" title="type parameter in Party">Party</a>&nbsp;notary,
                          java.util.List&lt;net.corda.core.contracts.StateRef&gt;&nbsp;inputs,
                          java.util.List&lt;net.corda.core.crypto.SecureHash&gt;&nbsp;attachments,
                          java.util.List&lt;net.corda.core.contracts.TransactionState&gt;&nbsp;outputs,
                          java.util.List&lt;net.corda.core.contracts.Command&gt;&nbsp;commands,
                          java.util.Set&lt;net.corda.core.crypto.CompositeKey&gt;&nbsp;signers,
                          <a href="../../../../net/corda/core/contracts/Timestamp.html" title="type parameter in Timestamp">Timestamp</a>&nbsp;timestamp)</pre>
<div class="block"><p><p>A TransactionBuilder is a transaction class that's mutable (unlike the others which are all immutable). It is
intended to be passed around contracts that may edit it by adding new states/commands. Then once the states
and commands are right, this class can be used as a holding bucket to gather signatures from multiple parties.</p></p><p><p><p>The builder can be customised for specific transaction types, e.g. where additional processing is needed
before adding a state/command.</p></p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>notary</code> - Notary used for the transaction. If null, this indicates the transaction DOES NOT have a notary.
When this is set to a non-null value, an output state can be added by just passing in a <a href="../../../../net/corda/core/contracts/ContractState.html" title="interface in net.corda.core.contracts"><code>interface ContractState</code></a> â€“ a
<a href="../../../../net/corda/core/contracts/TransactionState.html" title="class in net.corda.core.contracts"><code>class TransactionState</code></a> with this notary specified will be generated automatically.</dd>
<dd><code>signers</code> - The set of public keys the transaction needs signatures for. The logic for building the signers set
can be customised for every <a href="../../../../net/corda/core/contracts/TransactionType.html" title="class in net.corda.core.contracts"><code>class TransactionType</code></a>. E.g. in the general case it contains the command and notary public keys,
but for the <a href="../../../../net/corda/core/contracts/TransactionType.NotaryChange.html" title="class in net.corda.core.contracts"><code>class TransactionType.NotaryChange</code></a> transactions it is the set of all input ContractState.participants.</dd>
</dl>
</li>
</ul>
<a name="TransactionBuilder--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TransactionBuilder</h4>
<pre>public&nbsp;TransactionBuilder()</pre>
<div class="block"><p><p>A TransactionBuilder is a transaction class that's mutable (unlike the others which are all immutable). It is
intended to be passed around contracts that may edit it by adding new states/commands. Then once the states
and commands are right, this class can be used as a holding bucket to gather signatures from multiple parties.</p></p><p><p><p>The builder can be customised for specific transaction types, e.g. where additional processing is needed
before adding a state/command.</p></p></p></div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTime</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/contracts/Timestamp.html" title="type parameter in Timestamp">Timestamp</a>&nbsp;getTime()</pre>
</li>
</ul>
<a name="copy--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>copy</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a>&nbsp;copy()</pre>
<div class="block"><p><p>Creates a copy of the builder.</p></p></div>
</li>
</ul>
<a name="setTime-time-timeTolerance-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTime</h4>
<pre>public&nbsp;void&nbsp;setTime(java.time.Instant&nbsp;time,
                    java.time.Duration&nbsp;timeTolerance)</pre>
<div class="block"><p><p>Places a <a href="#">TimestampCommand</a> in this transaction, removing any existing command if there is one.
The command requires a signature from the Notary service, which acts as a Timestamp Authority.
The signature can be obtained using <a href="#">NotaryFlow</a>.</p></p><p><p><p>The window of time in which the final timestamp may lie is defined as time +/- timeTolerance.
If you want a non-symmetrical time window you must add the command via <a href="../../../../net/corda/core/transactions/TransactionBuilder.html#addCommand-arg-"><code>TransactionBuilder.addCommand</code></a> yourself. The tolerance
should be chosen such that your code can finish building the transaction and sending it to the TSA within that
window of time, taking into account factors such as network latency. Transactions being built by a group of
collaborating parties may therefore require a higher time tolerance than a transaction being built by a single
node.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#">TimestampCommand</a>, 
<a href="#">NotaryFlow</a>, 
<a href="../../../../net/corda/core/transactions/TransactionBuilder.html#addCommand-arg-"><code>TransactionBuilder.addCommand</code></a></dd>
</dl>
</li>
</ul>
<a name="setTime-newTimestamp-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTime</h4>
<pre>public&nbsp;void&nbsp;setTime(<a href="../../../../net/corda/core/contracts/Timestamp.html" title="type parameter in Timestamp">Timestamp</a>&nbsp;newTimestamp)</pre>
</li>
</ul>
<a name="withItems-items-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withItems</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a>&nbsp;withItems(java.lang.Object&nbsp;items)</pre>
<div class="block"><p><p>A more convenient way to add items to this transaction that calls the add* methods for you based on type</p></p></div>
</li>
</ul>
<a name="getCurrentSigs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentSigs</h4>
<pre>public&nbsp;java.util.ArrayList&lt;net.corda.core.crypto.DigitalSignature.WithKey&gt;&nbsp;getCurrentSigs()</pre>
<div class="block"><p><p>The signatures that have been collected so far - might be incomplete!</p></p></div>
</li>
</ul>
<a name="signWith-key-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>signWith</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a>&nbsp;signWith(java.security.KeyPair&nbsp;key)</pre>
</li>
</ul>
<a name="checkAndAddSignature-sig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkAndAddSignature</h4>
<pre>public&nbsp;void&nbsp;checkAndAddSignature(<a href="../../../../net/corda/core/crypto/DigitalSignature.WithKey.html" title="type parameter in DigitalSignature.WithKey">DigitalSignature.WithKey</a>&nbsp;sig)</pre>
<div class="block"><p><p>Checks that the given signature matches one of the commands and that it is a correct signature over the tx, then
adds it.</p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - if the signature didn't match the transaction contents.</dd>
<dd> - if the signature key doesn't appear in any command.</dd>
</dl>
</li>
</ul>
<a name="checkSignature-sig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkSignature</h4>
<pre>public&nbsp;void&nbsp;checkSignature(<a href="../../../../net/corda/core/crypto/DigitalSignature.WithKey.html" title="type parameter in DigitalSignature.WithKey">DigitalSignature.WithKey</a>&nbsp;sig)</pre>
<div class="block"><p><p>Checks that the given signature matches one of the commands and that it is a correct signature over the tx.</p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - if the signature didn't match the transaction contents.</dd>
<dd> - if the signature key doesn't appear in any command.</dd>
</dl>
</li>
</ul>
<a name="addSignatureUnchecked-sig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addSignatureUnchecked</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a>&nbsp;addSignatureUnchecked(<a href="../../../../net/corda/core/crypto/DigitalSignature.WithKey.html" title="type parameter in DigitalSignature.WithKey">DigitalSignature.WithKey</a>&nbsp;sig)</pre>
<div class="block"><p><p>Adds the signature directly to the transaction, without checking it for validity.</p></p></div>
</li>
</ul>
<a name="toWireTransaction--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toWireTransaction</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/transactions/WireTransaction.html" title="type parameter in WireTransaction">WireTransaction</a>&nbsp;toWireTransaction()</pre>
</li>
</ul>
<a name="toSignedTransaction-checkSufficientSignatures-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toSignedTransaction</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;toSignedTransaction(boolean&nbsp;checkSufficientSignatures)</pre>
</li>
</ul>
<a name="addInputState-stateAndRef-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addInputState</h4>
<pre>public&nbsp;void&nbsp;addInputState(<a href="../../../../net/corda/core/contracts/StateAndRef.html" title="type parameter in StateAndRef">StateAndRef</a>&lt;?&gt;&nbsp;stateAndRef)</pre>
</li>
</ul>
<a name="addAttachment-attachmentId-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addAttachment</h4>
<pre>public&nbsp;void&nbsp;addAttachment(<a href="../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;attachmentId)</pre>
</li>
</ul>
<a name="addOutputState-state-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addOutputState</h4>
<pre>public&nbsp;int&nbsp;addOutputState(<a href="../../../../net/corda/core/contracts/TransactionState.html" title="type parameter in TransactionState">TransactionState</a>&lt;?&gt;&nbsp;state)</pre>
</li>
</ul>
<a name="addOutputState-state-notary-encumbrance-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addOutputState</h4>
<pre>public&nbsp;int&nbsp;addOutputState(<a href="../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&nbsp;state,
                          <a href="../../../../net/corda/core/crypto/Party.html" title="type parameter in Party">Party</a>&nbsp;notary,
                          java.lang.Integer&nbsp;encumbrance)</pre>
</li>
</ul>
<a name="addOutputState-state-notary-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addOutputState</h4>
<pre>public&nbsp;int&nbsp;addOutputState(<a href="../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&nbsp;state,
                          <a href="../../../../net/corda/core/crypto/Party.html" title="type parameter in Party">Party</a>&nbsp;notary)</pre>
</li>
</ul>
<a name="addOutputState-state-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addOutputState</h4>
<pre>public&nbsp;int&nbsp;addOutputState(<a href="../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&nbsp;state)</pre>
<div class="block"><p><p>A default notary must be specified during builder construction to use this method</p></p></div>
</li>
</ul>
<a name="addCommand-arg-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addCommand</h4>
<pre>public&nbsp;void&nbsp;addCommand(<a href="../../../../net/corda/core/contracts/Command.html" title="type parameter in Command">Command</a>&nbsp;arg)</pre>
</li>
</ul>
<a name="addCommand-data-keys-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addCommand</h4>
<pre>public&nbsp;void&nbsp;addCommand(<a href="../../../../net/corda/core/contracts/CommandData.html" title="type parameter in CommandData">CommandData</a>&nbsp;data,
                       net.corda.core.crypto.CompositeKey&nbsp;keys)</pre>
</li>
</ul>
<a name="addCommand-data-keys-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addCommand</h4>
<pre>public&nbsp;void&nbsp;addCommand(<a href="../../../../net/corda/core/contracts/CommandData.html" title="type parameter in CommandData">CommandData</a>&nbsp;data,
                       java.util.List&lt;? extends net.corda.core.crypto.CompositeKey&gt;&nbsp;keys)</pre>
</li>
</ul>
<a name="inputStates--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inputStates</h4>
<pre>public&nbsp;java.util.List&lt;net.corda.core.contracts.StateRef&gt;&nbsp;inputStates()</pre>
</li>
</ul>
<a name="outputStates--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outputStates</h4>
<pre>public&nbsp;java.util.List&lt;net.corda.core.contracts.TransactionState&gt;&nbsp;outputStates()</pre>
</li>
</ul>
<a name="commands--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commands</h4>
<pre>public&nbsp;java.util.List&lt;net.corda.core.contracts.Command&gt;&nbsp;commands()</pre>
</li>
</ul>
<a name="attachments--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>attachments</h4>
<pre>public&nbsp;java.util.List&lt;net.corda.core.crypto.SecureHash&gt;&nbsp;attachments()</pre>
</li>
</ul>
<a name="getType--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getType</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/contracts/TransactionType.html" title="type parameter in TransactionType">TransactionType</a>&nbsp;getType()</pre>
</li>
</ul>
<a name="getNotary--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNotary</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/crypto/Party.html" title="type parameter in Party">Party</a>&nbsp;getNotary()</pre>
</li>
</ul>
<a name="setNotary-p-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNotary</h4>
<pre>public&nbsp;void&nbsp;setNotary(<a href="../../../../net/corda/core/crypto/Party.html" title="type parameter in Party">Party</a>&nbsp;p)</pre>
</li>
</ul>
<a name="getInputs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInputs</h4>
<pre>public&nbsp;java.util.List&lt;net.corda.core.contracts.StateRef&gt;&nbsp;getInputs()</pre>
</li>
</ul>
<a name="getAttachments--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAttachments</h4>
<pre>public&nbsp;java.util.List&lt;net.corda.core.crypto.SecureHash&gt;&nbsp;getAttachments()</pre>
</li>
</ul>
<a name="getOutputs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutputs</h4>
<pre>public&nbsp;java.util.List&lt;net.corda.core.contracts.TransactionState&gt;&nbsp;getOutputs()</pre>
</li>
</ul>
<a name="getCommands--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommands</h4>
<pre>public&nbsp;java.util.List&lt;net.corda.core.contracts.Command&gt;&nbsp;getCommands()</pre>
</li>
</ul>
<a name="getSigners--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSigners</h4>
<pre>public&nbsp;java.util.Set&lt;net.corda.core.crypto.CompositeKey&gt;&nbsp;getSigners()</pre>
</li>
</ul>
<a name="getTimestamp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTimestamp</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/contracts/Timestamp.html" title="type parameter in Timestamp">Timestamp</a>&nbsp;getTimestamp()</pre>
</li>
</ul>
<a name="setTimestamp-p-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setTimestamp</h4>
<pre>public&nbsp;void&nbsp;setTimestamp(<a href="../../../../net/corda/core/contracts/Timestamp.html" title="type parameter in Timestamp">Timestamp</a>&nbsp;p)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/transactions/TraversableTransaction.html" title="interface in net.corda.core.transactions"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/transactions/TransactionBuilder.html" target="_top">Frames</a></li>
<li><a href="TransactionBuilder.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
