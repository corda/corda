<HTML>
<HEAD>
<title>InMemoryNetworkMapCache - </title>
<link rel="stylesheet" href="../../style.css">
</HEAD>
<BODY>
<a href="../index.html">net.corda.node.services.network</a>&nbsp;/&nbsp;<a href=".">InMemoryNetworkMapCache</a><br/>
<br/>
<h1>InMemoryNetworkMapCache</h1>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">InMemoryNetworkMapCache</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.serialization/-singleton-serialize-as-token/index.html"><span class="identifier">SingletonSerializeAsToken</span></a><span class="symbol">, </span><a href="../../net.corda.core.node.services/-network-map-cache/index.html"><span class="identifier">NetworkMapCache</span></a></code><br/>
<p>Extremely simple in-memory cache of the network map.</p>
<p>TODO: some method implementations can be moved up to <a href="../../net.corda.core.node.services/-network-map-cache/index.html">NetworkMapCache</a></p>
<br/>
<br/>
<br/>
<br/>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<a href="-init-.html">&lt;init&gt;</a></td>
<td>
<code><span class="identifier">InMemoryNetworkMapCache</span><span class="symbol">(</span><span class="symbol">)</span></code><p>Extremely simple in-memory cache of the network map.</p>
</td>
</tr>
</tbody>
</table>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<a href="changed.html">changed</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">changed</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node.services/-network-map-cache/-map-change/index.html"><span class="identifier">MapChange</span></a><span class="symbol">&gt;</span></code><p>Tracks changes to the network map cache</p>
</td>
</tr>
<tr>
<td>
<a href="map-service-registered.html">mapServiceRegistered</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">mapServiceRegistered</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">&lt;</span><span class="identifier">Unit</span><span class="symbol">&gt;</span></code><p>Future to track completion of the NetworkMapService registration.</p>
</td>
</tr>
<tr>
<td>
<a href="network-map-nodes.html">networkMapNodes</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">networkMapNodes</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code><p>A list of nodes that advertise a network map service</p>
</td>
</tr>
<tr>
<td>
<a href="notary-nodes.html">notaryNodes</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">notaryNodes</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code><p>A list of nodes that advertise a notary service</p>
</td>
</tr>
<tr>
<td>
<a href="party-nodes.html">partyNodes</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">partyNodes</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code><p>A list of all nodes the cache is aware of</p>
</td>
</tr>
<tr>
<td>
<a href="registered-nodes.html">registeredNodes</a></td>
<td>
<code><span class="keyword">var </span><span class="identifier">registeredNodes</span><span class="symbol">: </span><span class="identifier">MutableMap</span><span class="symbol">&lt;</span><a href="../../net.corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">,</span>&nbsp;<a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<a href="regulators.html">regulators</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">regulators</span><span class="symbol">: </span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span></code><p>A list of nodes that advertise a regulatory service. Identifying the correct regulator for a trade is outside
the scope of the network map service, and this is intended solely as a sanity check on configuration stored
elsewhere.</p>
</td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="add-map-service.html">addMapService</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">addMapService</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$addMapService(net.corda.core.messaging.MessagingService, net.corda.core.messaging.SingleMessageRecipient, kotlin.Boolean, kotlin.Int)/net">net</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.messaging/-messaging-service/index.html"><span class="identifier">MessagingService</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$addMapService(net.corda.core.messaging.MessagingService, net.corda.core.messaging.SingleMessageRecipient, kotlin.Boolean, kotlin.Int)/networkMapAddress">networkMapAddress</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.messaging/-single-message-recipient.html"><span class="identifier">SingleMessageRecipient</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$addMapService(net.corda.core.messaging.MessagingService, net.corda.core.messaging.SingleMessageRecipient, kotlin.Boolean, kotlin.Int)/subscribe">subscribe</span><span class="symbol">:</span>&nbsp;<span class="identifier">Boolean</span><span class="symbol">, </span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$addMapService(net.corda.core.messaging.MessagingService, net.corda.core.messaging.SingleMessageRecipient, kotlin.Boolean, kotlin.Int)/ifChangedSinceVer">ifChangedSinceVer</span><span class="symbol">:</span>&nbsp;<span class="identifier">Int</span><span class="symbol">?</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">&lt;</span><span class="identifier">Unit</span><span class="symbol">&gt;</span></code><p>Add a network map service; fetches a copy of the latest map from the service and subscribes to any further
updates.</p>
</td>
</tr>
<tr>
<td>
<a href="add-node.html">addNode</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">addNode</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$addNode(net.corda.core.node.NodeInfo)/node">node</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>Adds a node to the local cache (generally only used for adding ourselves).</p>
</td>
</tr>
<tr>
<td>
<a href="deregister-for-updates.html">deregisterForUpdates</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">deregisterForUpdates</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$deregisterForUpdates(net.corda.core.messaging.MessagingService, net.corda.core.node.NodeInfo)/net">net</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.messaging/-messaging-service/index.html"><span class="identifier">MessagingService</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$deregisterForUpdates(net.corda.core.messaging.MessagingService, net.corda.core.node.NodeInfo)/service">service</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">&lt;</span><span class="identifier">Unit</span><span class="symbol">&gt;</span></code><p>Unsubscribes from updates from the given map service.</p>
</td>
</tr>
<tr>
<td>
<a href="get.html">get</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">get</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span></code><p>Get a copy of all nodes in the map.</p>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">get</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$get(net.corda.core.node.services.ServiceType)/serviceType">serviceType</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.node.services/-service-type/index.html"><span class="identifier">ServiceType</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span></code><p>Get the collection of nodes which advertise a specific service.</p>
</td>
</tr>
<tr>
<td>
<a href="get-any-notary.html">getAnyNotary</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getAnyNotary</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$getAnyNotary(net.corda.core.node.services.ServiceType)/type">type</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.node.services/-service-type/index.html"><span class="identifier">ServiceType</span></a><span class="symbol">?</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">?</span></code><p>Returns a notary identity advertised by any of the nodes on the network (chosen at random)</p>
</td>
</tr>
<tr>
<td>
<a href="get-node-by-composite-key.html">getNodeByCompositeKey</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getNodeByCompositeKey</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$getNodeByCompositeKey(net.corda.core.crypto.CompositeKey)/compositeKey">compositeKey</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.crypto/-composite-key/index.html"><span class="identifier">CompositeKey</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">?</span></code><p>Look up the node info for a composite key.</p>
</td>
</tr>
<tr>
<td>
<a href="get-node-by-legal-name.html">getNodeByLegalName</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getNodeByLegalName</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$getNodeByLegalName(kotlin.String)/name">name</span><span class="symbol">:</span>&nbsp;<span class="identifier">String</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span></code><p>Look up the node info for a legal name.</p>
</td>
</tr>
<tr>
<td>
<a href="get-notary.html">getNotary</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getNotary</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$getNotary(kotlin.String)/name">name</span><span class="symbol">:</span>&nbsp;<span class="identifier">String</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">?</span></code><p>Gets a notary identity by the given name.</p>
</td>
</tr>
<tr>
<td>
<a href="get-recommended.html">getRecommended</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getRecommended</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$getRecommended(net.corda.core.node.services.ServiceType, net.corda.core.contracts.Contract, kotlin.Array((net.corda.core.crypto.Party)))/type">type</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.node.services/-service-type/index.html"><span class="identifier">ServiceType</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$getRecommended(net.corda.core.node.services.ServiceType, net.corda.core.contracts.Contract, kotlin.Array((net.corda.core.crypto.Party)))/contract">contract</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.contracts/-contract/index.html"><span class="identifier">Contract</span></a><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$getRecommended(net.corda.core.node.services.ServiceType, net.corda.core.contracts.Contract, kotlin.Array((net.corda.core.crypto.Party)))/party">party</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">?</span></code><p>Get a recommended node that advertises a service, and is suitable for the specified contract and parties.
Implementations might understand, for example, the correct regulator to use for specific contracts/parties,
or the appropriate oracle for a contract.</p>
</td>
</tr>
<tr>
<td>
<a href="get-representative-node.html">getRepresentativeNode</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getRepresentativeNode</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$getRepresentativeNode(net.corda.core.crypto.Party)/party">party</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">?</span></code><p>Given a <a href="get-representative-node.html#net.corda.node.services.network.InMemoryNetworkMapCache$getRepresentativeNode(net.corda.core.crypto.Party)/party">party</a>, returns a node advertising it as an identity. If more than one node found the result
is chosen at random.</p>
</td>
</tr>
<tr>
<td>
<a href="is-notary.html">isNotary</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">isNotary</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$isNotary(net.corda.core.crypto.Party)/party">party</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.crypto/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span></code><p>Checks whether a given party is an advertised notary identity</p>
</td>
</tr>
<tr>
<td>
<a href="process-update-push.html">processUpdatePush</a></td>
<td>
<code><span class="keyword">fun </span><span class="identifier">processUpdatePush</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$processUpdatePush(net.corda.node.services.network.NetworkMapService.Update)/req">req</span><span class="symbol">:</span>&nbsp;<a href="../-network-map-service/-update/index.html"><span class="identifier">Update</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code></td>
</tr>
<tr>
<td>
<a href="remove-node.html">removeNode</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">removeNode</span><span class="symbol">(</span><span class="identifier" id="net.corda.node.services.network.InMemoryNetworkMapCache$removeNode(net.corda.core.node.NodeInfo)/node">node</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>Removes a node from the local cache.</p>
</td>
</tr>
<tr>
<td>
<a href="run-without-map-service.html">runWithoutMapService</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">runWithoutMapService</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Unit</span></code><p>For testing where the network map cache is manipulated marks the service as immediately ready.</p>
</td>
</tr>
<tr>
<td>
<a href="track.html">track</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">track</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">&lt;</span><span class="identifier">List</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node/-node-info/index.html"><span class="identifier">NodeInfo</span></a><span class="symbol">&gt;</span><span class="symbol">,</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">&lt;</span><a href="../../net.corda.core.node.services/-network-map-cache/-map-change/index.html"><span class="identifier">MapChange</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code><p>Atomically get the current party nodes and a stream of updates. Note that the Observable buffers updates until the
first subscriber is registered so as to avoid racing with early updates.</p>
</td>
</tr>
</tbody>
</table>
<h3>Inherited Functions</h3>
<table>
<tbody>
<tr>
<td>
<a href="../../net.corda.core.serialization/-singleton-serialize-as-token/to-token.html">toToken</a></td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">toToken</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.serialization.SingletonSerializeAsToken$toToken(net.corda.core.serialization.SerializeAsTokenContext)/context">context</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.serialization/-serialize-as-token-context/index.html"><span class="identifier">SerializeAsTokenContext</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.serialization/-serialization-token/index.html"><span class="identifier">SerializationToken</span></a></code></td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
