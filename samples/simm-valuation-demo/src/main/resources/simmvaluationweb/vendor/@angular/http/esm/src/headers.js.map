{"version":3,"file":"headers.js","sourceRoot":"","sources":["../../../../../modules/@angular/http/src/headers.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {BaseException} from '../src/facade/exceptions';\nimport {isBlank} from '../src/facade/lang';\n\nimport {isListLikeIterable, iterateListLike, Map, MapWrapper, StringMapWrapper, ListWrapper,} from '../src/facade/collection';\n\n/**\n * Polyfill for [Headers](https://developer.mozilla.org/en-US/docs/Web/API/Headers/Headers), as\n * specified in the [Fetch Spec](https://fetch.spec.whatwg.org/#headers-class).\n *\n * The only known difference between this `Headers` implementation and the spec is the\n * lack of an `entries` method.\n *\n * ### Example ([live demo](http://plnkr.co/edit/MTdwT6?p=preview))\n *\n * ```\n * import {Headers} from '@angular/http';\n *\n * var firstHeaders = new Headers();\n * firstHeaders.append('Content-Type', 'image/jpeg');\n * console.log(firstHeaders.get('Content-Type')) //'image/jpeg'\n *\n * // Create headers from Plain Old JavaScript Object\n * var secondHeaders = new Headers({\n *   'X-My-Custom-Header': 'Angular'\n * });\n * console.log(secondHeaders.get('X-My-Custom-Header')); //'Angular'\n *\n * var thirdHeaders = new Headers(secondHeaders);\n * console.log(thirdHeaders.get('X-My-Custom-Header')); //'Angular'\n * ```\n *\n * @experimental\n */\nexport class Headers {\n  /** @internal */\n  _headersMap: Map<string, string[]>;\n  constructor(headers?: Headers|{[key: string]: any}) {\n    if (headers instanceof Headers) {\n      this._headersMap = (<Headers>headers)._headersMap;\n      return;\n    }\n\n    this._headersMap = new Map<string, string[]>();\n\n    if (isBlank(headers)) {\n      return;\n    }\n\n    // headers instanceof StringMap\n    StringMapWrapper.forEach(headers, (v: any, k: string) => {\n      this._headersMap.set(k, isListLikeIterable(v) ? v : [v]);\n    });\n  }\n\n  /**\n   * Returns a new Headers instance from the given DOMString of Response Headers\n   */\n  static fromResponseHeaderString(headersString: string): Headers {\n    return headersString.trim()\n        .split('\\n')\n        .map(val => val.split(':'))\n        .map(([key, ...parts]) => ([key.trim(), parts.join(':').trim()]))\n        .reduce((headers, [key, value]) => !headers.set(key, value) && headers, new Headers());\n  }\n\n  /**\n   * Appends a header to existing list of header values for a given header name.\n   */\n  append(name: string, value: string): void {\n    var mapName = this._headersMap.get(name);\n    var list = isListLikeIterable(mapName) ? mapName : [];\n    list.push(value);\n    this._headersMap.set(name, list);\n  }\n\n  /**\n   * Deletes all header values for the given name.\n   */\n  delete (name: string): void { this._headersMap.delete(name); }\n\n  forEach(fn: (values: string[], name: string, headers: Map<string, string[]>) => void): void {\n    this._headersMap.forEach(fn);\n  }\n\n  /**\n   * Returns first header that matches given name.\n   */\n  get(header: string): string { return ListWrapper.first(this._headersMap.get(header)); }\n\n  /**\n   * Check for existence of header by given name.\n   */\n  has(header: string): boolean { return this._headersMap.has(header); }\n\n  /**\n   * Provides names of set headers\n   */\n  keys(): string[] { return MapWrapper.keys(this._headersMap); }\n\n  /**\n   * Sets or overrides header value for given name.\n   */\n  set(header: string, value: string|string[]): void {\n    var list: string[] = [];\n\n    if (isListLikeIterable(value)) {\n      var pushValue = (<string[]>value).join(',');\n      list.push(pushValue);\n    } else {\n      list.push(<string>value);\n    }\n\n    this._headersMap.set(header, list);\n  }\n\n  /**\n   * Returns values of all headers.\n   */\n  values(): string[][] { return MapWrapper.values(this._headersMap); }\n\n  /**\n   * Returns string of all headers.\n   */\n  toJSON(): {[key: string]: any} {\n    let serializableHeaders = {};\n    this._headersMap.forEach((values: string[], name: string) => {\n      let list: any[] /** TODO #9100 */ = [];\n\n      iterateListLike(\n          values, (val: any /** TODO #9100 */) => list = ListWrapper.concat(list, val.split(',')));\n\n      (serializableHeaders as any /** TODO #9100 */)[name] = list;\n    });\n    return serializableHeaders;\n  }\n\n  /**\n   * Returns list of header values for a given name.\n   */\n  getAll(header: string): string[] {\n    var headers = this._headersMap.get(header);\n    return isListLikeIterable(headers) ? headers : [];\n  }\n\n  /**\n   * This method is not implemented.\n   */\n  entries() { throw new BaseException('\"entries\" method is not implemented on Headers class'); }\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}