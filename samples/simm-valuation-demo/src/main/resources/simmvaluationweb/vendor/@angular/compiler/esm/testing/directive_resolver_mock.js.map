{"version":3,"file":"directive_resolver_mock.js","sourceRoot":"","sources":["../../../../../modules/@angular/compiler/testing/directive_resolver_mock.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Compiler, ComponentMetadata, DirectiveMetadata, Injectable, Injector} from '@angular/core';\n\nimport {DirectiveResolver} from '../src/directive_resolver';\nimport {Map} from '../src/facade/collection';\nimport {Type, isPresent} from '../src/facade/lang';\nexport class MockDirectiveResolver extends DirectiveResolver {\n  private _providerOverrides = new Map<Type, any[]>();\n  private viewProviderOverrides = new Map<Type, any[]>();\n\n  constructor(private _injector: Injector) { super(); }\n\n  private get _compiler(): Compiler { return this._injector.get(Compiler); }\n\n  resolve(type: Type): DirectiveMetadata {\n    var dm = super.resolve(type);\n\n    var providerOverrides = this._providerOverrides.get(type);\n    var viewProviderOverrides = this.viewProviderOverrides.get(type);\n\n    var providers = dm.providers;\n    if (isPresent(providerOverrides)) {\n      var originalViewProviders: any[] = isPresent(dm.providers) ? dm.providers : [];\n      providers = originalViewProviders.concat(providerOverrides);\n    }\n\n    if (dm instanceof ComponentMetadata) {\n      var viewProviders = dm.viewProviders;\n      if (isPresent(viewProviderOverrides)) {\n        var originalViewProviders: any[] = isPresent(dm.viewProviders) ? dm.viewProviders : [];\n        viewProviders = originalViewProviders.concat(viewProviderOverrides);\n      }\n\n      return new ComponentMetadata({\n        selector: dm.selector,\n        inputs: dm.inputs,\n        outputs: dm.outputs,\n        host: dm.host,\n        exportAs: dm.exportAs,\n        moduleId: dm.moduleId,\n        queries: dm.queries,\n        changeDetection: dm.changeDetection,\n        providers: providers,\n        viewProviders: viewProviders,\n        precompile: dm.precompile\n      });\n    }\n\n    return new DirectiveMetadata({\n      selector: dm.selector,\n      inputs: dm.inputs,\n      outputs: dm.outputs,\n      host: dm.host,\n      providers: providers,\n      exportAs: dm.exportAs,\n      queries: dm.queries\n    });\n  }\n\n  setProvidersOverride(type: Type, providers: any[]): void {\n    this._providerOverrides.set(type, providers);\n    this._compiler.clearCacheFor(type);\n  }\n\n  setViewProvidersOverride(type: Type, viewProviders: any[]): void {\n    this.viewProviderOverrides.set(type, viewProviders);\n    this._compiler.clearCacheFor(type);\n  }\n/** @nocollapse */\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: {type: Function, decorators?: DecoratorInvocation[]}[] = [\n{type: Injector, },\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}