var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)};!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("@angular/common"),require("@angular/core"),require("rxjs/add/operator/map"),require("rxjs/add/operator/mergeMap"),require("rxjs/add/operator/mergeAll"),require("rxjs/add/operator/reduce"),require("rxjs/add/operator/every"),require("rxjs/add/observable/from"),require("rxjs/add/observable/forkJoin"),require("rxjs/Observable"),require("rxjs/Subject"),require("rxjs/observable/of"),require("rxjs/BehaviorSubject"),require("rxjs/add/operator/toPromise"),require("rxjs/observable/forkJoin"),require("rxjs/observable/fromPromise"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define(["exports","@angular/common","@angular/core","rxjs/add/operator/map","rxjs/add/operator/mergeMap","rxjs/add/operator/mergeAll","rxjs/add/operator/reduce","rxjs/add/operator/every","rxjs/add/observable/from","rxjs/add/observable/forkJoin","rxjs/Observable","rxjs/Subject","rxjs/observable/of","rxjs/BehaviorSubject","rxjs/add/operator/toPromise","rxjs/observable/forkJoin","rxjs/observable/fromPromise","@angular/platform-browser"],factory):factory((global.ng=global.ng||{},global.ng.router=global.ng.router||{}),global.ng.common,global.ng.core,global.rxjs_add_operator_map,global.rxjs_add_operator_mergeMap,global.rxjs_add_operator_mergeAll,global.rxjs_add_operator_reduce,global.rxjs_add_operator_every,global.rxjs_add_observable_from,global.rxjs_add_observable_forkJoin,global.Rx,global.Rx,global.rxjs_observable_of,global.Rx,global.rxjs_add_operator_toPromise,global.rxjs_observable_forkJoin,global.rxjs_observable_fromPromise,global.ng.platformBrowser)}(this,function(exports,_angular_common,_angular_core,rxjs_add_operator_map,rxjs_add_operator_mergeMap,rxjs_add_operator_mergeAll,rxjs_add_operator_reduce,rxjs_add_operator_every,rxjs_add_observable_from,rxjs_add_observable_forkJoin,rxjs_Observable,rxjs_Subject,rxjs_observable_of,rxjs_BehaviorSubject,rxjs_add_operator_toPromise,rxjs_observable_forkJoin,rxjs_observable_fromPromise,_angular_platformBrowser){"use strict";function shallowEqualArrays(a,b){if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i)if(!shallowEqual(a[i],b[i]))return!1;return!0}function shallowEqual(a,b){var k1=Object.keys(a),k2=Object.keys(b);if(k1.length!=k2.length)return!1;for(var key,i=0;i<k1.length;i++)if(key=k1[i],a[key]!==b[key])return!1;return!0}function last(a){return a.length>0?a[a.length-1]:null}function merge(m1,m2){var m={};for(var attr in m1)m1.hasOwnProperty(attr)&&(m[attr]=m1[attr]);for(var attr in m2)m2.hasOwnProperty(attr)&&(m[attr]=m2[attr]);return m}function forEach(map,callback){for(var prop in map)map.hasOwnProperty(prop)&&callback(map[prop],prop)}function createEmptyUrlTree(){return new UrlTree(new UrlSegment([],{}),{},null)}function containsTree(container,containee,exact){return exact?equalSegments(container.root,containee.root):containsSegment(container.root,containee.root)}function equalSegments(container,containee){if(!equalPath(container.pathsWithParams,containee.pathsWithParams))return!1;if(container.numberOfChildren!==containee.numberOfChildren)return!1;for(var c in containee.children){if(!container.children[c])return!1;if(!equalSegments(container.children[c],containee.children[c]))return!1}return!0}function containsSegment(container,containee){return containsSegmentHelper(container,containee,containee.pathsWithParams)}function containsSegmentHelper(container,containee,containeePaths){if(container.pathsWithParams.length>containeePaths.length){var current=container.pathsWithParams.slice(0,containeePaths.length);return!!equalPath(current,containeePaths)&&!containee.hasChildren()}if(container.pathsWithParams.length===containeePaths.length){if(!equalPath(container.pathsWithParams,containeePaths))return!1;for(var c in containee.children){if(!container.children[c])return!1;if(!containsSegment(container.children[c],containee.children[c]))return!1}return!0}var current=containeePaths.slice(0,container.pathsWithParams.length),next=containeePaths.slice(container.pathsWithParams.length);return!!equalPath(container.pathsWithParams,current)&&(!!container.children[PRIMARY_OUTLET]&&containsSegmentHelper(container.children[PRIMARY_OUTLET],containee,next))}function equalPath(a,b){if(a.length!==b.length)return!1;for(var i=0;i<a.length;++i)if(a[i].path!==b[i].path)return!1;return!0}function mapChildren(segment,fn){var newChildren={};return forEach(segment.children,function(child,childOutlet){childOutlet===PRIMARY_OUTLET&&(newChildren[childOutlet]=fn(child,childOutlet))}),forEach(segment.children,function(child,childOutlet){childOutlet!==PRIMARY_OUTLET&&(newChildren[childOutlet]=fn(child,childOutlet))}),newChildren}function mapChildrenIntoArray(segment,fn){var res=[];return forEach(segment.children,function(child,childOutlet){childOutlet===PRIMARY_OUTLET&&(res=res.concat(fn(child,childOutlet)))}),forEach(segment.children,function(child,childOutlet){childOutlet!==PRIMARY_OUTLET&&(res=res.concat(fn(child,childOutlet)))}),res}function serializePaths(segment){return segment.pathsWithParams.map(function(p){return serializePath(p)}).join("/")}function serializeSegment(segment,root){if(segment.children[PRIMARY_OUTLET]&&root){var primary=serializeSegment(segment.children[PRIMARY_OUTLET],!1),children_1=[];return forEach(segment.children,function(v,k){k!==PRIMARY_OUTLET&&children_1.push(k+":"+serializeSegment(v,!1))}),children_1.length>0?primary+"("+children_1.join("//")+")":""+primary}if(segment.hasChildren()&&!root){var children=mapChildrenIntoArray(segment,function(v,k){return k===PRIMARY_OUTLET?[serializeSegment(segment.children[PRIMARY_OUTLET],!1)]:[k+":"+serializeSegment(v,!1)]});return serializePaths(segment)+"/("+children.join("//")+")"}return serializePaths(segment)}function serializePath(path){return""+path.path+serializeParams(path.parameters)}function serializeParams(params){return pairs(params).map(function(p){return";"+p.first+"="+p.second}).join("")}function serializeQueryParams(params){var strs=pairs(params).map(function(p){return p.first+"="+p.second});return strs.length>0?"?"+strs.join("&"):""}function pairs(obj){var res=[];for(var prop in obj)obj.hasOwnProperty(prop)&&res.push(new Pair(prop,obj[prop]));return res}function matchPathWithParams(str){SEGMENT_RE.lastIndex=0;var match=SEGMENT_RE.exec(str);return match?match[0]:""}function matchQueryParams(str){QUERY_PARAM_RE.lastIndex=0;var match=SEGMENT_RE.exec(str);return match?match[0]:""}function matchUrlQueryParamValue(str){QUERY_PARAM_VALUE_RE.lastIndex=0;var match=QUERY_PARAM_VALUE_RE.exec(str);return match?match[0]:""}function applyRedirects(urlTree,config){try{return createUrlTree(urlTree,expandSegment(config,urlTree.root,PRIMARY_OUTLET))}catch(e){return e instanceof GlobalRedirect?createUrlTree(urlTree,new UrlSegment([],(_a={},_a[PRIMARY_OUTLET]=new UrlSegment(e.paths,{}),_a))):e instanceof NoMatch?new rxjs_Observable.Observable(function(obs){return obs.error(new Error("Cannot match any routes: '"+e.segment+"'"))}):new rxjs_Observable.Observable(function(obs){return obs.error(e)})}var _a}function createUrlTree(urlTree,rootCandidate){var root=rootCandidate.pathsWithParams.length>0?new UrlSegment([],(_a={},_a[PRIMARY_OUTLET]=rootCandidate,_a)):rootCandidate;return rxjs_observable_of.of(new UrlTree(root,urlTree.queryParams,urlTree.fragment));var _a}function expandSegment(routes,segment,outlet){return 0===segment.pathsWithParams.length&&segment.hasChildren()?new UrlSegment([],expandSegmentChildren(routes,segment)):expandPathsWithParams(segment,routes,segment.pathsWithParams,outlet,!0)}function expandSegmentChildren(routes,segment){return mapChildren(segment,function(child,childOutlet){return expandSegment(routes,child,childOutlet)})}function expandPathsWithParams(segment,routes,paths,outlet,allowRedirects){for(var _i=0,routes_1=routes;_i<routes_1.length;_i++){var r=routes_1[_i];try{return expandPathsWithParamsAgainstRoute(segment,routes,r,paths,outlet,allowRedirects)}catch(e){if(!(e instanceof NoMatch))throw e}}throw new NoMatch(segment)}function expandPathsWithParamsAgainstRoute(segment,routes,route,paths,outlet,allowRedirects){if(getOutlet$1(route)!==outlet)throw new NoMatch;if(void 0!==route.redirectTo&&!allowRedirects)throw new NoMatch;return void 0!==route.redirectTo?expandPathsWithParamsAgainstRouteUsingRedirect(segment,routes,route,paths,outlet):matchPathsWithParamsAgainstRoute(segment,route,paths)}function expandPathsWithParamsAgainstRouteUsingRedirect(segment,routes,route,paths,outlet){return"**"===route.path?expandWildCardWithParamsAgainstRouteUsingRedirect(route):expandRegularPathWithParamsAgainstRouteUsingRedirect(segment,routes,route,paths,outlet)}function expandWildCardWithParamsAgainstRouteUsingRedirect(route){var newPaths=applyRedirectCommands([],route.redirectTo,{});if(route.redirectTo.startsWith("/"))throw new GlobalRedirect(newPaths);return new UrlSegment(newPaths,{})}function expandRegularPathWithParamsAgainstRouteUsingRedirect(segment,routes,route,paths,outlet){var _a=match(segment,route,paths),consumedPaths=_a.consumedPaths,lastChild=_a.lastChild,positionalParamSegments=_a.positionalParamSegments,newPaths=applyRedirectCommands(consumedPaths,route.redirectTo,positionalParamSegments);if(route.redirectTo.startsWith("/"))throw new GlobalRedirect(newPaths);return expandPathsWithParams(segment,routes,newPaths.concat(paths.slice(lastChild)),outlet,!1)}function matchPathsWithParamsAgainstRoute(rawSegment,route,paths){if("**"===route.path)return new UrlSegment(paths,{});var _a=match(rawSegment,route,paths),consumedPaths=_a.consumedPaths,lastChild=_a.lastChild,childConfig=route.children?route.children:[],rawSlicedPath=paths.slice(lastChild),_b=split(rawSegment,consumedPaths,rawSlicedPath,childConfig),segment=_b.segment,slicedPath=_b.slicedPath;if(0===slicedPath.length&&segment.hasChildren()){var children=expandSegmentChildren(childConfig,segment);return new UrlSegment(consumedPaths,children)}if(0===childConfig.length&&0===slicedPath.length)return new UrlSegment(consumedPaths,{});var cs=expandPathsWithParams(segment,childConfig,slicedPath,PRIMARY_OUTLET,!0);return new UrlSegment(consumedPaths.concat(cs.pathsWithParams),cs.children)}function match(segment,route,paths){if(""===route.path){if((route.terminal||"full"===route.pathMatch)&&(segment.hasChildren()||paths.length>0))throw new NoMatch;return{consumedPaths:[],lastChild:0,positionalParamSegments:{}}}for(var path=route.path,parts=path.split("/"),positionalParamSegments={},consumedPaths=[],currentIndex=0,i=0;i<parts.length;++i){if(currentIndex>=paths.length)throw new NoMatch;var current=paths[currentIndex],p=parts[i],isPosParam=p.startsWith(":");if(!isPosParam&&p!==current.path)throw new NoMatch;isPosParam&&(positionalParamSegments[p.substring(1)]=current),consumedPaths.push(current),currentIndex++}if(route.terminal&&(segment.hasChildren()||currentIndex<paths.length))throw new NoMatch;return{consumedPaths:consumedPaths,lastChild:currentIndex,positionalParamSegments:positionalParamSegments}}function applyRedirectCommands(paths,redirectTo,posParams){var r=redirectTo.startsWith("/")?redirectTo.substring(1):redirectTo;return""===r?[]:createPaths(redirectTo,r.split("/"),paths,posParams)}function createPaths(redirectTo,parts,segments,posParams){return parts.map(function(p){return p.startsWith(":")?findPosParam(p,posParams,redirectTo):findOrCreatePath(p,segments)})}function findPosParam(part,posParams,redirectTo){var paramName=part.substring(1),pos=posParams[paramName];if(!pos)throw new Error("Cannot redirect to '"+redirectTo+"'. Cannot find '"+part+"'.");return pos}function findOrCreatePath(part,paths){for(var idx=0,_i=0,paths_1=paths;_i<paths_1.length;_i++){var s=paths_1[_i];if(s.path===part)return paths.splice(idx),s;idx++}return new UrlPathWithParams(part,{})}function split(segment,consumedPaths,slicedPath,config){if(slicedPath.length>0&&containsEmptyPathRedirectsWithNamedOutlets(segment,slicedPath,config)){var s=new UrlSegment(consumedPaths,createChildrenForEmptyPaths(config,new UrlSegment(slicedPath,segment.children)));return{segment:mergeTrivialChildren(s),slicedPath:[]}}if(0===slicedPath.length&&containsEmptyPathRedirects(segment,slicedPath,config)){var s=new UrlSegment(segment.pathsWithParams,addEmptyPathsToChildrenIfNeeded(segment,slicedPath,config,segment.children));return{segment:mergeTrivialChildren(s),slicedPath:slicedPath}}return{segment:segment,slicedPath:slicedPath}}function mergeTrivialChildren(s){if(1===s.numberOfChildren&&s.children[PRIMARY_OUTLET]){var c=s.children[PRIMARY_OUTLET];return new UrlSegment(s.pathsWithParams.concat(c.pathsWithParams),c.children)}return s}function addEmptyPathsToChildrenIfNeeded(segment,slicedPath,routes,children){for(var res={},_i=0,routes_2=routes;_i<routes_2.length;_i++){var r=routes_2[_i];emptyPathRedirect(segment,slicedPath,r)&&!children[getOutlet$1(r)]&&(res[getOutlet$1(r)]=new UrlSegment([],{}))}return merge(children,res)}function createChildrenForEmptyPaths(routes,primarySegment){var res={};res[PRIMARY_OUTLET]=primarySegment;for(var _i=0,routes_3=routes;_i<routes_3.length;_i++){var r=routes_3[_i];""===r.path&&(res[getOutlet$1(r)]=new UrlSegment([],{}))}return res}function containsEmptyPathRedirectsWithNamedOutlets(segment,slicedPath,routes){return routes.filter(function(r){return emptyPathRedirect(segment,slicedPath,r)&&getOutlet$1(r)!==PRIMARY_OUTLET}).length>0}function containsEmptyPathRedirects(segment,slicedPath,routes){return routes.filter(function(r){return emptyPathRedirect(segment,slicedPath,r)}).length>0}function emptyPathRedirect(segment,slicedPath,r){return(!(segment.hasChildren()||slicedPath.length>0)||!r.terminal&&"full"!==r.pathMatch)&&(""===r.path&&void 0!==r.redirectTo)}function getOutlet$1(route){return route.outlet?route.outlet:PRIMARY_OUTLET}function validateConfig(config){config.forEach(validateNode)}function validateNode(route){if(route.redirectTo&&route.children)throw new Error("Invalid configuration of route '"+route.path+"': redirectTo and children cannot be used together");if(route.redirectTo&&route.component)throw new Error("Invalid configuration of route '"+route.path+"': redirectTo and component cannot be used together");if(void 0===route.redirectTo&&!route.component&&!route.children)throw new Error("Invalid configuration of route '"+route.path+"': component, redirectTo, children must be provided");if(void 0===route.path)throw new Error("Invalid route configuration: routes must have path specified");if(route.path.startsWith("/"))throw new Error("Invalid route configuration of route '"+route.path+"': path cannot start with a slash");if(""===route.path&&void 0!==route.redirectTo&&void 0===route.terminal&&void 0===route.pathMatch){var exp="The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.";throw new Error("Invalid route configuration of route '{path: \""+route.path+'", redirectTo: "'+route.redirectTo+"\"}': please provide 'pathMatch'. "+exp)}}function findNode(expected,c){if(expected===c.value)return c;for(var _i=0,_a=c.children;_i<_a.length;_i++){var cc=_a[_i],r=findNode(expected,cc);if(r)return r}return null}function findPath(expected,c,collected){if(collected.push(c),expected===c.value)return collected;for(var _i=0,_a=c.children;_i<_a.length;_i++){var cc=_a[_i],cloned=collected.slice(0),r=findPath(expected,cc,cloned);if(r)return r}return[]}function contains(tree,subtree){if(tree.value!==subtree.value)return!1;for(var _loop_1=function(subtreeNode){var s=tree.children.filter(function(child){return child.value===subtreeNode.value});return 0===s.length?{value:!1}:contains(s[0],subtreeNode)?void 0:{value:!1}},_i=0,_a=subtree.children;_i<_a.length;_i++){var subtreeNode=_a[_i],state_1=_loop_1(subtreeNode);if("object"==typeof state_1)return state_1.value}return!0}function createEmptyState(urlTree,rootComponent){var snapshot=createEmptyStateSnapshot(urlTree,rootComponent),emptyUrl=new rxjs_BehaviorSubject.BehaviorSubject([new UrlPathWithParams("",{})]),emptyParams=new rxjs_BehaviorSubject.BehaviorSubject({}),emptyData=new rxjs_BehaviorSubject.BehaviorSubject({}),emptyQueryParams=new rxjs_BehaviorSubject.BehaviorSubject({}),fragment=new rxjs_BehaviorSubject.BehaviorSubject(""),activated=new ActivatedRoute(emptyUrl,emptyParams,emptyData,PRIMARY_OUTLET,rootComponent,snapshot.root);return activated.snapshot=snapshot.root,new RouterState(new TreeNode(activated,[]),emptyQueryParams,fragment,snapshot)}function createEmptyStateSnapshot(urlTree,rootComponent){var emptyParams={},emptyData={},emptyQueryParams={},fragment="",activated=new ActivatedRouteSnapshot([],emptyParams,emptyData,PRIMARY_OUTLET,rootComponent,null,urlTree.root,(-1),InheritedResolve.empty);return new RouterStateSnapshot("",new TreeNode(activated,[]),emptyQueryParams,fragment)}function serializeNode(node){var c=node.children.length>0?" { "+node.children.map(serializeNode).join(", ")+" } ":"";return""+node.value+c}function advanceActivatedRoute(route){route.snapshot?(shallowEqual(route.snapshot.params,route._futureSnapshot.params)||(route.params.next(route._futureSnapshot.params),route.data.next(route._futureSnapshot.data)),shallowEqualArrays(route.snapshot.url,route._futureSnapshot.url)||route.url.next(route._futureSnapshot.url),route.snapshot=route._futureSnapshot):(route.snapshot=route._futureSnapshot,route.data.next(route._futureSnapshot.data))}function createRouterState(curr,prevState){var root=createNode(curr._root,prevState?prevState._root:void 0),queryParams=prevState?prevState.queryParams:new rxjs_BehaviorSubject.BehaviorSubject(curr.queryParams),fragment=prevState?prevState.fragment:new rxjs_BehaviorSubject.BehaviorSubject(curr.fragment);return new RouterState(root,queryParams,fragment,curr)}function createNode(curr,prevState){if(prevState&&equalRouteSnapshots(prevState.value.snapshot,curr.value)){var value=prevState.value;value._futureSnapshot=curr.value;var children=createOrReuseChildren(curr,prevState);return new TreeNode(value,children)}var value=createActivatedRoute(curr.value),children=curr.children.map(function(c){return createNode(c)});return new TreeNode(value,children)}function createOrReuseChildren(curr,prevState){return curr.children.map(function(child){for(var _i=0,_a=prevState.children;_i<_a.length;_i++){var p=_a[_i];if(equalRouteSnapshots(p.value.snapshot,child.value))return createNode(child,p)}return createNode(child)})}function createActivatedRoute(c){return new ActivatedRoute(new rxjs_BehaviorSubject.BehaviorSubject(c.url),new rxjs_BehaviorSubject.BehaviorSubject(c.params),new rxjs_BehaviorSubject.BehaviorSubject(c.data),c.outlet,c.component,c)}function equalRouteSnapshots(a,b){return a._routeConfig===b._routeConfig}function createUrlTree$1(route,urlTree,commands,queryParams,fragment){if(0===commands.length)return tree(urlTree.root,urlTree.root,urlTree,queryParams,fragment);var normalizedCommands=normalizeCommands(commands);if(navigateToRoot(normalizedCommands))return tree(urlTree.root,new UrlSegment([],{}),urlTree,queryParams,fragment);var startingPosition=findStartingPosition(normalizedCommands,urlTree,route),segment=startingPosition.processChildren?updateSegmentChildren(startingPosition.segment,startingPosition.index,normalizedCommands.commands):updateSegment(startingPosition.segment,startingPosition.index,normalizedCommands.commands);return tree(startingPosition.segment,segment,urlTree,queryParams,fragment)}function tree(oldSegment,newSegment,urlTree,queryParams,fragment){var q=queryParams?stringify(queryParams):urlTree.queryParams,f=fragment?fragment:urlTree.fragment;return urlTree.root===oldSegment?new UrlTree(newSegment,q,f):new UrlTree(replaceSegment(urlTree.root,oldSegment,newSegment),q,f)}function replaceSegment(current,oldSegment,newSegment){var children={};return forEach(current.children,function(c,outletName){c===oldSegment?children[outletName]=newSegment:children[outletName]=replaceSegment(c,oldSegment,newSegment)}),new UrlSegment(current.pathsWithParams,children)}function navigateToRoot(normalizedChange){return normalizedChange.isAbsolute&&1===normalizedChange.commands.length&&"/"==normalizedChange.commands[0]}function normalizeCommands(commands){if("string"==typeof commands[0]&&1===commands.length&&"/"==commands[0])return new NormalizedNavigationCommands((!0),0,commands);for(var numberOfDoubleDots=0,isAbsolute=!1,res=[],i=0;i<commands.length;++i){var c=commands[i];if("string"==typeof c)for(var parts=c.split("/"),j=0;j<parts.length;++j){var cc=parts[j];0==i?0==j&&"."==cc||(0==j&&""==cc?isAbsolute=!0:".."==cc?numberOfDoubleDots++:""!=cc&&res.push(cc)):""!=cc&&res.push(cc)}else res.push(c)}return new NormalizedNavigationCommands(isAbsolute,numberOfDoubleDots,res)}function findStartingPosition(normalizedChange,urlTree,route){if(normalizedChange.isAbsolute)return new Position(urlTree.root,(!0),0);if(route.snapshot._lastPathIndex===-1)return new Position(route.snapshot._urlSegment,(!0),0);if(route.snapshot._lastPathIndex+1-normalizedChange.numberOfDoubleDots>=0)return new Position(route.snapshot._urlSegment,(!1),route.snapshot._lastPathIndex+1-normalizedChange.numberOfDoubleDots);throw new Error("Invalid number of '../'")}function getPath(command){if("string"!=typeof command)return command.toString();var parts=command.toString().split(":");return parts.length>1?parts[1]:command}function getOutlet$2(commands){if("string"!=typeof commands[0])return PRIMARY_OUTLET;var parts=commands[0].toString().split(":");return parts.length>1?parts[0]:PRIMARY_OUTLET}function updateSegment(segment,startIndex,commands){if(segment||(segment=new UrlSegment([],{})),0===segment.pathsWithParams.length&&segment.hasChildren())return updateSegmentChildren(segment,startIndex,commands);var m=prefixedWith(segment,startIndex,commands),slicedCommands=commands.slice(m.lastIndex);return m.match&&0===slicedCommands.length?new UrlSegment(segment.pathsWithParams,{}):m.match&&!segment.hasChildren()?createNewSegment(segment,startIndex,commands):m.match?updateSegmentChildren(segment,0,slicedCommands):createNewSegment(segment,startIndex,commands)}function updateSegmentChildren(segment,startIndex,commands){if(0===commands.length)return new UrlSegment(segment.pathsWithParams,{});var outlet_1=getOutlet$2(commands),children_2={};return children_2[outlet_1]=updateSegment(segment.children[outlet_1],startIndex,commands),forEach(segment.children,function(child,childOutlet){childOutlet!==outlet_1&&(children_2[childOutlet]=child)}),new UrlSegment(segment.pathsWithParams,children_2)}function prefixedWith(segment,startIndex,commands){for(var currentCommandIndex=0,currentPathIndex=startIndex,noMatch={match:!1,lastIndex:0};currentPathIndex<segment.pathsWithParams.length;){if(currentCommandIndex>=commands.length)return noMatch;var path=segment.pathsWithParams[currentPathIndex],curr=getPath(commands[currentCommandIndex]),next=currentCommandIndex<commands.length-1?commands[currentCommandIndex+1]:null;if(curr&&next&&"object"==typeof next){if(!compare(curr,next,path))return noMatch;currentCommandIndex+=2}else{if(!compare(curr,{},path))return noMatch;currentCommandIndex++}currentPathIndex++}return{match:!0,lastIndex:currentCommandIndex}}function createNewSegment(segment,startIndex,commands){for(var paths=segment.pathsWithParams.slice(0,startIndex),i=0;i<commands.length;)if(0!==i||"object"!=typeof commands[0]){var curr=getPath(commands[i]),next=i<commands.length-1?commands[i+1]:null;curr&&next&&"object"==typeof next?(paths.push(new UrlPathWithParams(curr,stringify(next))),i+=2):(paths.push(new UrlPathWithParams(curr,{})),i++)}else{var p=segment.pathsWithParams[startIndex];paths.push(new UrlPathWithParams(p.path,commands[0])),i++}return new UrlSegment(paths,{})}function stringify(params){var res={};return forEach(params,function(v,k){return res[k]=""+v}),res}function compare(path,params,pathWithParams){return path==pathWithParams.path&&shallowEqual(params,pathWithParams.parameters)}function recognize(rootComponentType,config,urlTree,url){try{var children=processSegment(config,urlTree.root,InheritedFromParent.empty,PRIMARY_OUTLET),root=new ActivatedRouteSnapshot([],{},{},PRIMARY_OUTLET,rootComponentType,null,urlTree.root,(-1),InheritedResolve.empty),rootNode=new TreeNode(root,children);return rxjs_observable_of.of(new RouterStateSnapshot(url,rootNode,urlTree.queryParams,urlTree.fragment))}catch(e){return e instanceof NoMatch$1?new rxjs_Observable.Observable(function(obs){return obs.error(new Error("Cannot match any routes: '"+e.segment+"'"))}):new rxjs_Observable.Observable(function(obs){return obs.error(e)})}}function processSegment(config,segment,inherited,outlet){return 0===segment.pathsWithParams.length&&segment.hasChildren()?processSegmentChildren(config,segment,inherited):processPathsWithParams(config,segment,0,segment.pathsWithParams,inherited,outlet)}function processSegmentChildren(config,segment,inherited){var children=mapChildrenIntoArray(segment,function(child,childOutlet){return processSegment(config,child,inherited,childOutlet)});return checkOutletNameUniqueness(children),sortActivatedRouteSnapshots(children),children}function sortActivatedRouteSnapshots(nodes){nodes.sort(function(a,b){return a.value.outlet===PRIMARY_OUTLET?-1:b.value.outlet===PRIMARY_OUTLET?1:a.value.outlet.localeCompare(b.value.outlet)})}function processPathsWithParams(config,segment,pathIndex,paths,inherited,outlet){for(var _i=0,config_1=config;_i<config_1.length;_i++){var r=config_1[_i];try{return processPathsWithParamsAgainstRoute(r,segment,pathIndex,paths,inherited,outlet)}catch(e){if(!(e instanceof NoMatch$1))throw e}}throw new NoMatch$1(segment)}function processPathsWithParamsAgainstRoute(route,rawSegment,pathIndex,paths,inherited,outlet){if(route.redirectTo)throw new NoMatch$1;if((route.outlet?route.outlet:PRIMARY_OUTLET)!==outlet)throw new NoMatch$1;var newInheritedResolve=new InheritedResolve(inherited.resolve,getResolve(route));if("**"===route.path){var params=paths.length>0?last(paths).parameters:{},snapshot_1=new ActivatedRouteSnapshot(paths,merge(inherited.allParams,params),merge(inherited.allData,getData(route)),outlet,route.component,route,getSourceSegment(rawSegment),getPathIndexShift(rawSegment)-1,newInheritedResolve);return[new TreeNode(snapshot_1,[])]}var _a=match$1(rawSegment,route,paths),consumedPaths=_a.consumedPaths,parameters=_a.parameters,lastChild=_a.lastChild,rawSlicedPath=paths.slice(lastChild),childConfig=route.children?route.children:[],newInherited=route.component?InheritedFromParent.empty:new InheritedFromParent(inherited,parameters,getData(route),newInheritedResolve),_b=split$1(rawSegment,consumedPaths,rawSlicedPath,childConfig),segment=_b.segment,slicedPath=_b.slicedPath,snapshot=new ActivatedRouteSnapshot(consumedPaths,merge(inherited.allParams,parameters),merge(inherited.allData,getData(route)),outlet,route.component,route,getSourceSegment(rawSegment),getPathIndexShift(rawSegment)+pathIndex+lastChild-1,newInheritedResolve);if(0===slicedPath.length&&segment.hasChildren()){var children=processSegmentChildren(childConfig,segment,newInherited);return[new TreeNode(snapshot,children)]}if(0===childConfig.length&&0===slicedPath.length)return[new TreeNode(snapshot,[])];var children=processPathsWithParams(childConfig,segment,pathIndex+lastChild,slicedPath,newInherited,PRIMARY_OUTLET);return[new TreeNode(snapshot,children)]}function match$1(segment,route,paths){if(""===route.path){if((route.terminal||"full"===route.pathMatch)&&(segment.hasChildren()||paths.length>0))throw new NoMatch$1;return{consumedPaths:[],lastChild:0,parameters:{}}}for(var path=route.path,parts=path.split("/"),posParameters={},consumedPaths=[],currentIndex=0,i=0;i<parts.length;++i){if(currentIndex>=paths.length)throw new NoMatch$1;var current=paths[currentIndex],p=parts[i],isPosParam=p.startsWith(":");if(!isPosParam&&p!==current.path)throw new NoMatch$1;isPosParam&&(posParameters[p.substring(1)]=current.path),consumedPaths.push(current),currentIndex++}if((route.terminal||"full"===route.pathMatch)&&(segment.hasChildren()||currentIndex<paths.length))throw new NoMatch$1;var parameters=merge(posParameters,consumedPaths[consumedPaths.length-1].parameters);return{consumedPaths:consumedPaths,lastChild:currentIndex,parameters:parameters}}function checkOutletNameUniqueness(nodes){var names={};nodes.forEach(function(n){var routeWithSameOutletName=names[n.value.outlet];if(routeWithSameOutletName){var p=routeWithSameOutletName.url.map(function(s){return s.toString()}).join("/"),c=n.value.url.map(function(s){return s.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+p+"' and '"+c+"'.")}names[n.value.outlet]=n.value})}function getSourceSegment(segment){for(var s=segment;s._sourceSegment;)s=s._sourceSegment;return s}function getPathIndexShift(segment){for(var s=segment,res=0;s._sourceSegment;)s=s._sourceSegment,res+=segment._pathIndexShift;return res}function split$1(segment,consumedPaths,slicedPath,config){if(slicedPath.length>0&&containsEmptyPathMatchesWithNamedOutlets(segment,slicedPath,config)){var s=new UrlSegment(consumedPaths,createChildrenForEmptyPaths$1(segment,consumedPaths,config,new UrlSegment(slicedPath,segment.children)));return s._sourceSegment=segment,s._pathIndexShift=0,{segment:s,slicedPath:[]}}if(0===slicedPath.length&&containsEmptyPathMatches(segment,slicedPath,config)){var s=new UrlSegment(segment.pathsWithParams,addEmptyPathsToChildrenIfNeeded$1(segment,slicedPath,config,segment.children));return s._sourceSegment=segment,s._pathIndexShift=0,{segment:s,slicedPath:slicedPath}}return{segment:segment,slicedPath:slicedPath}}function addEmptyPathsToChildrenIfNeeded$1(segment,slicedPath,routes,children){for(var res={},_i=0,routes_4=routes;_i<routes_4.length;_i++){var r=routes_4[_i];if(emptyPathMatch(segment,slicedPath,r)&&!children[getOutlet$3(r)]){var s=new UrlSegment([],{});s._sourceSegment=segment,s._pathIndexShift=segment.pathsWithParams.length,res[getOutlet$3(r)]=s}}return merge(children,res)}function createChildrenForEmptyPaths$1(segment,consumedPaths,routes,primarySegment){var res={};res[PRIMARY_OUTLET]=primarySegment,primarySegment._sourceSegment=segment,primarySegment._pathIndexShift=consumedPaths.length;for(var _i=0,routes_5=routes;_i<routes_5.length;_i++){var r=routes_5[_i];if(""===r.path){var s=new UrlSegment([],{});s._sourceSegment=segment,s._pathIndexShift=consumedPaths.length,res[getOutlet$3(r)]=s}}return res}function containsEmptyPathMatchesWithNamedOutlets(segment,slicedPath,routes){return routes.filter(function(r){return emptyPathMatch(segment,slicedPath,r)&&getOutlet$3(r)!==PRIMARY_OUTLET}).length>0}function containsEmptyPathMatches(segment,slicedPath,routes){return routes.filter(function(r){return emptyPathMatch(segment,slicedPath,r)}).length>0}function emptyPathMatch(segment,slicedPath,r){return(!(segment.hasChildren()||slicedPath.length>0)||!r.terminal&&"full"!==r.pathMatch)&&(""===r.path&&void 0===r.redirectTo)}function getOutlet$3(route){return route.outlet?route.outlet:PRIMARY_OUTLET}function getData(route){return route.data?route.data:{}}function getResolve(route){return route.resolve?route.resolve:{}}function resolve(resolver,state){return resolveNode(resolver,state._root).map(function(_){return state})}function resolveNode(resolver,node){if(0===node.children.length)return rxjs_observable_fromPromise.fromPromise(resolveComponent(resolver,node.value).then(function(factory){return node.value._resolvedComponentFactory=factory,node.value}));var c=node.children.map(function(c){return resolveNode(resolver,c).toPromise()});return rxjs_observable_forkJoin.forkJoin(c).map(function(_){return resolveComponent(resolver,node.value).then(function(factory){return node.value._resolvedComponentFactory=factory,node.value})})}function resolveComponent(resolver,snapshot){return snapshot.component&&snapshot._routeConfig?resolver.resolveComponent(snapshot.component):Promise.resolve(null);
}function wrapIntoObservable(value){return value instanceof rxjs_Observable.Observable?value:rxjs_observable_of.of(value)}function pushQueryParamsAndFragment(state){shallowEqual(state.snapshot.queryParams,state.queryParams.value)||state.queryParams.next(state.snapshot.queryParams),state.snapshot.fragment!==state.fragment.value&&state.fragment.next(state.snapshot.fragment)}function nodeChildrenAsMap(node){return node?node.children.reduce(function(m,c){return m[c.value.outlet]=c,m},{}):{}}function getOutlet(outletMap,route){var outlet=outletMap._outlets[route.outlet];if(!outlet){var componentName=route.component.name;throw route.outlet===PRIMARY_OUTLET?new Error("Cannot find primary outlet to load '"+componentName+"'"):new Error("Cannot find the outlet "+route.outlet+" to load '"+componentName+"'")}return outlet}function setupRouter(ref,resolver,urlSerializer,outletMap,location,injector,config,opts){if(0==ref.componentTypes.length)throw new Error("Bootstrap at least one component before injecting Router.");var componentType=ref.componentTypes[0],r=new Router(componentType,resolver,urlSerializer,outletMap,location,injector,config);return ref.registerDisposeListener(function(){return r.dispose()}),opts.enableTracing&&r.events.subscribe(function(e){console.group("Router Event: "+e.constructor.name),console.log(e.toString()),console.log(e),console.groupEnd()}),r}function setupRouterInitializer(injector){return setTimeout(function(){var appRef=injector.get(_angular_core.ApplicationRef);0==appRef.componentTypes.length?appRef.registerBootstrapListener(function(){injector.get(Router).initialNavigation()}):injector.get(Router).initialNavigation()},0),function(){return null}}function provideRouter$1(_config,_opts){return[{provide:ROUTER_CONFIG,useValue:_config},{provide:ROUTER_OPTIONS,useValue:_opts},_angular_common.Location,{provide:_angular_common.LocationStrategy,useClass:_angular_common.PathLocationStrategy},{provide:UrlSerializer,useClass:DefaultUrlSerializer},{provide:Router,useFactory:setupRouter,deps:[_angular_core.ApplicationRef,_angular_core.ComponentResolver,UrlSerializer,RouterOutletMap,_angular_common.Location,_angular_core.Injector,ROUTER_CONFIG,ROUTER_OPTIONS]},RouterOutletMap,{provide:ActivatedRoute,useFactory:function(r){return r.routerState.root},deps:[Router]},{provide:_angular_core.APP_INITIALIZER,multi:!0,useFactory:setupRouterInitializer,deps:[_angular_core.Injector]}]}function provideRouter(config,opts){return void 0===opts&&(opts={}),[{provide:_angular_common.PlatformLocation,useClass:_angular_platformBrowser.BrowserPlatformLocation}].concat(provideRouter$1(config,opts))}var PRIMARY_OUTLET="PRIMARY_OUTLET",UrlTree=function(){function UrlTree(root,queryParams,fragment){this.root=root,this.queryParams=queryParams,this.fragment=fragment}return UrlTree.prototype.toString=function(){return(new DefaultUrlSerializer).serialize(this)},UrlTree}(),UrlSegment=function(){function UrlSegment(pathsWithParams,children){var _this=this;this.pathsWithParams=pathsWithParams,this.children=children,this.parent=null,forEach(children,function(v,k){return v.parent=_this})}return UrlSegment.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(UrlSegment.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),UrlSegment.prototype.toString=function(){return serializePaths(this)},UrlSegment}(),UrlPathWithParams=function(){function UrlPathWithParams(path,parameters){this.path=path,this.parameters=parameters}return UrlPathWithParams.prototype.toString=function(){return serializePath(this)},UrlPathWithParams}(),UrlSerializer=function(){function UrlSerializer(){}return UrlSerializer}(),DefaultUrlSerializer=function(){function DefaultUrlSerializer(){}return DefaultUrlSerializer.prototype.parse=function(url){var p=new UrlParser(url);return new UrlTree(p.parseRootSegment(),p.parseQueryParams(),p.parseFragment())},DefaultUrlSerializer.prototype.serialize=function(tree){var segment="/"+serializeSegment(tree.root,!0),query=serializeQueryParams(tree.queryParams),fragment=null!==tree.fragment?"#"+tree.fragment:"";return""+segment+query+fragment},DefaultUrlSerializer}(),Pair=function(){function Pair(first,second){this.first=first,this.second=second}return Pair}(),SEGMENT_RE=/^[^\/\(\)\?;=&#]+/,QUERY_PARAM_RE=/^[^=\?&#]+/,QUERY_PARAM_VALUE_RE=/^[^\?&#]+/,UrlParser=function(){function UrlParser(remaining){this.remaining=remaining}return UrlParser.prototype.peekStartsWith=function(str){return this.remaining.startsWith(str)},UrlParser.prototype.capture=function(str){if(!this.remaining.startsWith(str))throw new Error('Expected "'+str+'".');this.remaining=this.remaining.substring(str.length)},UrlParser.prototype.parseRootSegment=function(){return this.remaining.startsWith("/")&&this.capture("/"),""===this.remaining||this.remaining.startsWith("?")?new UrlSegment([],{}):new UrlSegment([],this.parseSegmentChildren())},UrlParser.prototype.parseSegmentChildren=function(){if(0==this.remaining.length)return{};this.peekStartsWith("/")&&this.capture("/");for(var paths=[this.parsePathWithParams()];this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),paths.push(this.parsePathWithParams());var children={};this.peekStartsWith("/(")&&(this.capture("/"),children=this.parseParens(!0));var res={};return this.peekStartsWith("(")&&(res=this.parseParens(!1)),res[PRIMARY_OUTLET]=new UrlSegment(paths,children),res},UrlParser.prototype.parsePathWithParams=function(){var path=matchPathWithParams(this.remaining);if(""===path&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");this.capture(path);var matrixParams={};return this.peekStartsWith(";")&&(matrixParams=this.parseMatrixParams()),new UrlPathWithParams(path,matrixParams)},UrlParser.prototype.parseQueryParams=function(){var params={};if(this.peekStartsWith("?"))for(this.capture("?"),this.parseQueryParam(params);this.remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseQueryParam(params);return params},UrlParser.prototype.parseFragment=function(){return this.peekStartsWith("#")?this.remaining.substring(1):null},UrlParser.prototype.parseMatrixParams=function(){for(var params={};this.remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(params);return params},UrlParser.prototype.parseParam=function(params){var key=matchPathWithParams(this.remaining);if(key){this.capture(key);var value="true";if(this.peekStartsWith("=")){this.capture("=");var valueMatch=matchPathWithParams(this.remaining);valueMatch&&(value=valueMatch,this.capture(value))}params[key]=value}},UrlParser.prototype.parseQueryParam=function(params){var key=matchQueryParams(this.remaining);if(key){this.capture(key);var value="true";if(this.peekStartsWith("=")){this.capture("=");var valueMatch=matchUrlQueryParamValue(this.remaining);valueMatch&&(value=valueMatch,this.capture(value))}params[key]=value}},UrlParser.prototype.parseParens=function(allowPrimary){var segments={};for(this.capture("(");!this.peekStartsWith(")")&&this.remaining.length>0;){var path=matchPathWithParams(this.remaining),outletName=void 0;path.indexOf(":")>-1?(outletName=path.substr(0,path.indexOf(":")),this.capture(outletName),this.capture(":")):allowPrimary&&(outletName=PRIMARY_OUTLET);var children=this.parseSegmentChildren();segments[outletName]=1===Object.keys(children).length?children[PRIMARY_OUTLET]:new UrlSegment([],children),this.peekStartsWith("//")&&this.capture("//")}return this.capture(")"),segments},UrlParser}(),NoMatch=function(){function NoMatch(segment){void 0===segment&&(segment=null),this.segment=segment}return NoMatch}(),GlobalRedirect=function(){function GlobalRedirect(paths){this.paths=paths}return GlobalRedirect}(),Tree=function(){function Tree(root){this._root=root}return Object.defineProperty(Tree.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),Tree.prototype.parent=function(t){var p=this.pathFromRoot(t);return p.length>1?p[p.length-2]:null},Tree.prototype.children=function(t){var n=findNode(t,this._root);return n?n.children.map(function(t){return t.value}):[]},Tree.prototype.firstChild=function(t){var n=findNode(t,this._root);return n&&n.children.length>0?n.children[0].value:null},Tree.prototype.siblings=function(t){var p=findPath(t,this._root,[]);if(p.length<2)return[];var c=p[p.length-2].children.map(function(c){return c.value});return c.filter(function(cc){return cc!==t})},Tree.prototype.pathFromRoot=function(t){return findPath(t,this._root,[]).map(function(s){return s.value})},Tree.prototype.contains=function(tree){return contains(this._root,tree._root)},Tree}(),TreeNode=function(){function TreeNode(value,children){this.value=value,this.children=children}return TreeNode.prototype.toString=function(){return"TreeNode("+this.value+")"},TreeNode}(),RouterState=function(_super){function RouterState(root,queryParams,fragment,snapshot){_super.call(this,root),this.queryParams=queryParams,this.fragment=fragment,this.snapshot=snapshot}return __extends(RouterState,_super),RouterState.prototype.toString=function(){return this.snapshot.toString()},RouterState}(Tree),ActivatedRoute=function(){function ActivatedRoute(url,params,data,outlet,component,futureSnapshot){this.url=url,this.params=params,this.data=data,this.outlet=outlet,this.component=component,this._futureSnapshot=futureSnapshot}return ActivatedRoute.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},ActivatedRoute}(),InheritedResolve=function(){function InheritedResolve(parent,current){this.parent=parent,this.current=current,this.resolvedData={}}return Object.defineProperty(InheritedResolve.prototype,"flattenedResolvedData",{get:function(){return this.parent?merge(this.parent.flattenedResolvedData,this.resolvedData):this.resolvedData},enumerable:!0,configurable:!0}),Object.defineProperty(InheritedResolve,"empty",{get:function(){return new InheritedResolve(null,{})},enumerable:!0,configurable:!0}),InheritedResolve}(),ActivatedRouteSnapshot=function(){function ActivatedRouteSnapshot(url,params,data,outlet,component,routeConfig,urlSegment,lastPathIndex,resolve){this.url=url,this.params=params,this.data=data,this.outlet=outlet,this.component=component,this._routeConfig=routeConfig,this._urlSegment=urlSegment,this._lastPathIndex=lastPathIndex,this._resolve=resolve}return ActivatedRouteSnapshot.prototype.toString=function(){var url=this.url.map(function(s){return s.toString()}).join("/"),matched=this._routeConfig?this._routeConfig.path:"";return"Route(url:'"+url+"', path:'"+matched+"')"},ActivatedRouteSnapshot}(),RouterStateSnapshot=function(_super){function RouterStateSnapshot(url,root,queryParams,fragment){_super.call(this,root),this.url=url,this.queryParams=queryParams,this.fragment=fragment}return __extends(RouterStateSnapshot,_super),RouterStateSnapshot.prototype.toString=function(){return serializeNode(this._root)},RouterStateSnapshot}(Tree),NormalizedNavigationCommands=function(){function NormalizedNavigationCommands(isAbsolute,numberOfDoubleDots,commands){this.isAbsolute=isAbsolute,this.numberOfDoubleDots=numberOfDoubleDots,this.commands=commands}return NormalizedNavigationCommands}(),Position=function(){function Position(segment,processChildren,index){this.segment=segment,this.processChildren=processChildren,this.index=index}return Position}(),NoMatch$1=function(){function NoMatch$1(segment){void 0===segment&&(segment=null),this.segment=segment}return NoMatch$1}(),InheritedFromParent=function(){function InheritedFromParent(parent,params,data,resolve){this.parent=parent,this.params=params,this.data=data,this.resolve=resolve}return Object.defineProperty(InheritedFromParent.prototype,"allParams",{get:function(){return this.parent?merge(this.parent.allParams,this.params):this.params},enumerable:!0,configurable:!0}),Object.defineProperty(InheritedFromParent.prototype,"allData",{get:function(){return this.parent?merge(this.parent.allData,this.data):this.data},enumerable:!0,configurable:!0}),Object.defineProperty(InheritedFromParent,"empty",{get:function(){return new InheritedFromParent(null,{},{},new InheritedResolve(null,{}))},enumerable:!0,configurable:!0}),InheritedFromParent}(),RouterOutletMap=function(){function RouterOutletMap(){this._outlets={}}return RouterOutletMap.prototype.registerOutlet=function(name,outlet){this._outlets[name]=outlet},RouterOutletMap}(),NavigationStart=function(){function NavigationStart(id,url){this.id=id,this.url=url}return NavigationStart.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},NavigationStart}(),NavigationEnd=function(){function NavigationEnd(id,url,urlAfterRedirects){this.id=id,this.url=url,this.urlAfterRedirects=urlAfterRedirects}return NavigationEnd.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},NavigationEnd}(),NavigationCancel=function(){function NavigationCancel(id,url){this.id=id,this.url=url}return NavigationCancel.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},NavigationCancel}(),NavigationError=function(){function NavigationError(id,url,error){this.id=id,this.url=url,this.error=error}return NavigationError.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},NavigationError}(),RoutesRecognized=function(){function RoutesRecognized(id,url,urlAfterRedirects,state){this.id=id,this.url=url,this.urlAfterRedirects=urlAfterRedirects,this.state=state}return RoutesRecognized.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},RoutesRecognized}(),Router=function(){function Router(rootComponentType,resolver,urlSerializer,outletMap,location,injector,config){this.rootComponentType=rootComponentType,this.resolver=resolver,this.urlSerializer=urlSerializer,this.outletMap=outletMap,this.location=location,this.injector=injector,this.navigationId=0,this.resetConfig(config),this.routerEvents=new rxjs_Subject.Subject,this.currentUrlTree=createEmptyUrlTree(),this.currentRouterState=createEmptyState(this.currentUrlTree,this.rootComponentType)}return Router.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),this.navigateByUrl(this.location.path(!0))},Object.defineProperty(Router.prototype,"routerState",{get:function(){return this.currentRouterState},enumerable:!0,configurable:!0}),Object.defineProperty(Router.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),Object.defineProperty(Router.prototype,"events",{get:function(){return this.routerEvents},enumerable:!0,configurable:!0}),Router.prototype.resetConfig=function(config){validateConfig(config),this.config=config},Router.prototype.dispose=function(){this.locationSubscription.unsubscribe()},Router.prototype.createUrlTree=function(commands,_a){var _b=void 0===_a?{}:_a,relativeTo=_b.relativeTo,queryParams=_b.queryParams,fragment=_b.fragment,a=relativeTo?relativeTo:this.routerState.root;return createUrlTree$1(a,this.currentUrlTree,commands,queryParams,fragment)},Router.prototype.navigateByUrl=function(url){if(url instanceof UrlTree)return this.scheduleNavigation(url,!1);var urlTree=this.urlSerializer.parse(url);return this.scheduleNavigation(urlTree,!1)},Router.prototype.navigate=function(commands,extras){return void 0===extras&&(extras={}),this.scheduleNavigation(this.createUrlTree(commands,extras),!1)},Router.prototype.serializeUrl=function(url){return this.urlSerializer.serialize(url)},Router.prototype.parseUrl=function(url){return this.urlSerializer.parse(url)},Router.prototype.scheduleNavigation=function(url,preventPushState){var _this=this,id=++this.navigationId;return this.routerEvents.next(new NavigationStart(id,this.serializeUrl(url))),Promise.resolve().then(function(_){return _this.runNavigate(url,preventPushState,id)})},Router.prototype.setUpLocationChangeListener=function(){var _this=this;this.locationSubscription=this.location.subscribe(function(change){return _this.scheduleNavigation(_this.urlSerializer.parse(change.url),change.pop)})},Router.prototype.runNavigate=function(url,preventPushState,id){var _this=this;return id!==this.navigationId?(this.location.go(this.urlSerializer.serialize(this.currentUrlTree)),this.routerEvents.next(new NavigationCancel(id,this.serializeUrl(url))),Promise.resolve(!1)):new Promise(function(resolvePromise,rejectPromise){var updatedUrl,state,navigationIsSuccessful,preActivation;applyRedirects(url,_this.config).mergeMap(function(u){return updatedUrl=u,recognize(_this.rootComponentType,_this.config,updatedUrl,_this.serializeUrl(updatedUrl))}).mergeMap(function(newRouterStateSnapshot){return _this.routerEvents.next(new RoutesRecognized(id,_this.serializeUrl(url),_this.serializeUrl(updatedUrl),newRouterStateSnapshot)),resolve(_this.resolver,newRouterStateSnapshot)}).map(function(routerStateSnapshot){return createRouterState(routerStateSnapshot,_this.currentRouterState)}).map(function(newState){state=newState,preActivation=new PreActivation(state.snapshot,_this.currentRouterState.snapshot,_this.injector),preActivation.traverse(_this.outletMap)}).mergeMap(function(_){return preActivation.checkGuards()}).mergeMap(function(shouldActivate){return shouldActivate?preActivation.resolveData().map(function(){return shouldActivate}):rxjs_observable_of.of(shouldActivate)}).forEach(function(shouldActivate){if(!shouldActivate||id!==_this.navigationId)return _this.routerEvents.next(new NavigationCancel(id,_this.serializeUrl(url))),void(navigationIsSuccessful=!1);if(new ActivateRoutes(state,_this.currentRouterState).activate(_this.outletMap),_this.currentUrlTree=updatedUrl,_this.currentRouterState=state,!preventPushState){var path=_this.urlSerializer.serialize(updatedUrl);_this.location.isCurrentPathEqualTo(path)?_this.location.replaceState(path):_this.location.go(path)}navigationIsSuccessful=!0}).then(function(){_this.routerEvents.next(new NavigationEnd(id,_this.serializeUrl(url),_this.serializeUrl(updatedUrl))),resolvePromise(navigationIsSuccessful)},function(e){_this.routerEvents.next(new NavigationError(id,_this.serializeUrl(url),e)),rejectPromise(e)})})},Router}(),CanActivate=function(){function CanActivate(route){this.route=route}return CanActivate}(),CanDeactivate=function(){function CanDeactivate(component,route){this.component=component,this.route=route}return CanDeactivate}(),PreActivation=function(){function PreActivation(future,curr,injector){this.future=future,this.curr=curr,this.injector=injector,this.checks=[]}return PreActivation.prototype.traverse=function(parentOutletMap){var futureRoot=this.future._root,currRoot=this.curr?this.curr._root:null;this.traverseChildRoutes(futureRoot,currRoot,parentOutletMap)},PreActivation.prototype.checkGuards=function(){var _this=this;return 0===this.checks.length?rxjs_observable_of.of(!0):rxjs_Observable.Observable.from(this.checks).map(function(s){if(s instanceof CanActivate)return _this.runCanActivate(s.route);if(s instanceof CanDeactivate){var s2=s;return _this.runCanDeactivate(s2.component,s2.route)}throw new Error("Cannot be reached")}).mergeAll().every(function(result){return result===!0})},PreActivation.prototype.resolveData=function(){var _this=this;return 0===this.checks.length?rxjs_observable_of.of(null):rxjs_Observable.Observable.from(this.checks).mergeMap(function(s){return s instanceof CanActivate?_this.runResolve(s.route):rxjs_observable_of.of(null)}).reduce(function(_,__){return _})},PreActivation.prototype.traverseChildRoutes=function(futureNode,currNode,outletMap){var _this=this,prevChildren=nodeChildrenAsMap(currNode);futureNode.children.forEach(function(c){_this.traverseRoutes(c,prevChildren[c.value.outlet],outletMap),delete prevChildren[c.value.outlet]}),forEach(prevChildren,function(v,k){return _this.deactivateOutletAndItChildren(v,outletMap._outlets[k])})},PreActivation.prototype.traverseRoutes=function(futureNode,currNode,parentOutletMap){var future=futureNode.value,curr=currNode?currNode.value:null,outlet=parentOutletMap?parentOutletMap._outlets[futureNode.value.outlet]:null;curr&&future._routeConfig===curr._routeConfig?(shallowEqual(future.params,curr.params)||this.checks.push(new CanDeactivate(outlet.component,curr),new CanActivate(future)),future.component?this.traverseChildRoutes(futureNode,currNode,outlet?outlet.outletMap:null):this.traverseChildRoutes(futureNode,currNode,parentOutletMap)):(curr&&(curr.component?this.deactivateOutletAndItChildren(curr,outlet):this.deactivateOutletMap(parentOutletMap)),this.checks.push(new CanActivate(future)),future.component?this.traverseChildRoutes(futureNode,null,outlet?outlet.outletMap:null):this.traverseChildRoutes(futureNode,null,parentOutletMap))},PreActivation.prototype.deactivateOutletAndItChildren=function(route,outlet){outlet&&outlet.isActivated&&(this.deactivateOutletMap(outlet.outletMap),this.checks.push(new CanDeactivate(outlet.component,route)))},PreActivation.prototype.deactivateOutletMap=function(outletMap){var _this=this;forEach(outletMap._outlets,function(v){v.isActivated&&_this.deactivateOutletAndItChildren(v.activatedRoute.snapshot,v)})},PreActivation.prototype.runCanActivate=function(future){var _this=this,canActivate=future._routeConfig?future._routeConfig.canActivate:null;return canActivate&&0!==canActivate.length?rxjs_Observable.Observable.from(canActivate).map(function(c){var guard=_this.injector.get(c);return wrapIntoObservable(guard.canActivate?guard.canActivate(future,_this.future):guard(future,_this.future))}).mergeAll().every(function(result){return result===!0}):rxjs_observable_of.of(!0)},PreActivation.prototype.runCanDeactivate=function(component,curr){var _this=this,canDeactivate=curr&&curr._routeConfig?curr._routeConfig.canDeactivate:null;return canDeactivate&&0!==canDeactivate.length?rxjs_Observable.Observable.from(canDeactivate).map(function(c){var guard=_this.injector.get(c);return wrapIntoObservable(guard.canDeactivate?guard.canDeactivate(component,curr,_this.curr):guard(component,curr,_this.curr))}).mergeAll().every(function(result){return result===!0}):rxjs_observable_of.of(!0)},PreActivation.prototype.runResolve=function(future){var resolve=future._resolve;return this.resolveNode(resolve.current,future).map(function(resolvedData){return resolve.resolvedData=resolvedData,future.data=merge(future.data,resolve.flattenedResolvedData),null})},PreActivation.prototype.resolveNode=function(resolve,future){var _this=this,resolvingObs=[],resolvedData={};return forEach(resolve,function(v,k){var resolver=_this.injector.get(v),obs=wrapIntoObservable(resolver.resolve?resolver.resolve(future,_this.future):resolver(future,_this.future));resolvingObs.push(obs.map(function(_){resolvedData[k]=_}))}),resolvingObs.length>0?rxjs_Observable.Observable.forkJoin(resolvingObs).map(function(r){return resolvedData}):rxjs_observable_of.of(resolvedData)},PreActivation}(),ActivateRoutes=function(){function ActivateRoutes(futureState,currState){this.futureState=futureState,this.currState=currState}return ActivateRoutes.prototype.activate=function(parentOutletMap){var futureRoot=this.futureState._root,currRoot=this.currState?this.currState._root:null;pushQueryParamsAndFragment(this.futureState),advanceActivatedRoute(this.futureState.root),this.activateChildRoutes(futureRoot,currRoot,parentOutletMap)},ActivateRoutes.prototype.activateChildRoutes=function(futureNode,currNode,outletMap){var _this=this,prevChildren=nodeChildrenAsMap(currNode);futureNode.children.forEach(function(c){_this.activateRoutes(c,prevChildren[c.value.outlet],outletMap),delete prevChildren[c.value.outlet]}),forEach(prevChildren,function(v,k){return _this.deactivateOutletAndItChildren(outletMap._outlets[k])})},ActivateRoutes.prototype.activateRoutes=function(futureNode,currNode,parentOutletMap){var future=futureNode.value,curr=currNode?currNode.value:null;if(future===curr)if(advanceActivatedRoute(future),future.component){var outlet=getOutlet(parentOutletMap,futureNode.value);this.activateChildRoutes(futureNode,currNode,outlet.outletMap)}else this.activateChildRoutes(futureNode,currNode,parentOutletMap);else{if(curr)if(curr.component){var outlet=getOutlet(parentOutletMap,futureNode.value);this.deactivateOutletAndItChildren(outlet)}else this.deactivateOutletMap(parentOutletMap);if(future.component){advanceActivatedRoute(future);var outlet=getOutlet(parentOutletMap,futureNode.value),outletMap=new RouterOutletMap;this.placeComponentIntoOutlet(outletMap,future,outlet),this.activateChildRoutes(futureNode,null,outletMap)}else advanceActivatedRoute(future),this.activateChildRoutes(futureNode,null,parentOutletMap)}},ActivateRoutes.prototype.placeComponentIntoOutlet=function(outletMap,future,outlet){var resolved=_angular_core.ReflectiveInjector.resolve([{provide:ActivatedRoute,useValue:future},{provide:RouterOutletMap,useValue:outletMap}]);outlet.activate(future,resolved,outletMap)},ActivateRoutes.prototype.deactivateOutletAndItChildren=function(outlet){outlet&&outlet.isActivated&&(this.deactivateOutletMap(outlet.outletMap),outlet.deactivate())},ActivateRoutes.prototype.deactivateOutletMap=function(outletMap){var _this=this;forEach(outletMap._outlets,function(v){return _this.deactivateOutletAndItChildren(v)})},ActivateRoutes}(),RouterLink=function(){function RouterLink(router,route,locationStrategy){this.router=router,this.route=route,this.locationStrategy=locationStrategy,this.commands=[]}return Object.defineProperty(RouterLink.prototype,"routerLink",{set:function(data){Array.isArray(data)?this.commands=data:this.commands=[data]},enumerable:!0,configurable:!0}),RouterLink.prototype.onClick=function(button,ctrlKey,metaKey){return!(0===button&&!ctrlKey&&!metaKey)||(this.router.navigate(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment}),!1)},RouterLink}();RouterLink.decorators=[{type:_angular_core.Directive,args:[{selector:":not(a)[routerLink]"}]}],RouterLink.ctorParameters=[{type:Router},{type:ActivatedRoute},{type:_angular_common.LocationStrategy}],RouterLink.propDecorators={queryParams:[{type:_angular_core.Input}],fragment:[{type:_angular_core.Input}],routerLink:[{type:_angular_core.Input}],onClick:[{type:_angular_core.HostListener,args:["click",["$event.button","$event.ctrlKey","$event.metaKey"]]}]};var RouterLinkWithHref=function(){function RouterLinkWithHref(router,route,locationStrategy){this.router=router,this.route=route,this.locationStrategy=locationStrategy,this.commands=[]}return Object.defineProperty(RouterLinkWithHref.prototype,"routerLink",{set:function(data){Array.isArray(data)?this.commands=data:this.commands=[data]},enumerable:!0,configurable:!0}),RouterLinkWithHref.prototype.ngOnChanges=function(changes){this.updateTargetUrlAndHref()},RouterLinkWithHref.prototype.onClick=function(button,ctrlKey,metaKey){return!(0===button&&!ctrlKey&&!metaKey)||("string"==typeof this.target&&"_self"!=this.target||(this.router.navigateByUrl(this.urlTree),!1))},RouterLinkWithHref.prototype.updateTargetUrlAndHref=function(){this.urlTree=this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment}),this.urlTree&&(this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)))},RouterLinkWithHref}();RouterLinkWithHref.decorators=[{type:_angular_core.Directive,args:[{selector:"a[routerLink]"}]}],RouterLinkWithHref.ctorParameters=[{type:Router},{type:ActivatedRoute},{type:_angular_common.LocationStrategy}],RouterLinkWithHref.propDecorators={target:[{type:_angular_core.Input}],queryParams:[{type:_angular_core.Input}],fragment:[{type:_angular_core.Input}],href:[{type:_angular_core.HostBinding}],routerLink:[{type:_angular_core.Input}],onClick:[{type:_angular_core.HostListener,args:["click",["$event.button","$event.ctrlKey","$event.metaKey"]]}]};var RouterLinkActive=function(){function RouterLinkActive(router,element,renderer){var _this=this;this.router=router,this.element=element,this.renderer=renderer,this.classes=[],this.routerLinkActiveOptions={exact:!1},this.subscription=router.events.subscribe(function(s){s instanceof NavigationEnd&&_this.update()})}return RouterLinkActive.prototype.ngAfterContentInit=function(){var _this=this;this.links.changes.subscribe(function(s){return _this.update()}),this.linksWithHrefs.changes.subscribe(function(s){return _this.update()}),this.update()},Object.defineProperty(RouterLinkActive.prototype,"routerLinkActive",{set:function(data){Array.isArray(data)?this.classes=data:this.classes=data.split(" ")},enumerable:!0,configurable:!0}),RouterLinkActive.prototype.ngOnChanges=function(changes){this.update()},RouterLinkActive.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},RouterLinkActive.prototype.update=function(){var _this=this;if(this.links&&this.linksWithHrefs){var currentUrlTree=this.router.parseUrl(this.router.url),isActiveLinks=this.reduceList(currentUrlTree,this.links),isActiveLinksWithHrefs=this.reduceList(currentUrlTree,this.linksWithHrefs);this.classes.forEach(function(c){return _this.renderer.setElementClass(_this.element.nativeElement,c,isActiveLinks||isActiveLinksWithHrefs)})}},RouterLinkActive.prototype.reduceList=function(currentUrlTree,q){var _this=this;return q.reduce(function(res,link){return res||containsTree(currentUrlTree,link.urlTree,_this.routerLinkActiveOptions.exact)},!1)},RouterLinkActive}();RouterLinkActive.decorators=[{type:_angular_core.Directive,args:[{selector:"[routerLinkActive]"}]}],RouterLinkActive.ctorParameters=[{type:Router},{type:_angular_core.ElementRef},{type:_angular_core.Renderer}],RouterLinkActive.propDecorators={links:[{type:_angular_core.ContentChildren,args:[RouterLink]}],linksWithHrefs:[{type:_angular_core.ContentChildren,args:[RouterLinkWithHref]}],routerLinkActiveOptions:[{type:_angular_core.Input}],routerLinkActive:[{type:_angular_core.Input}]};var RouterOutlet=function(){function RouterOutlet(parentOutletMap,location,componentFactoryResolver,name){this.location=location,this.componentFactoryResolver=componentFactoryResolver,parentOutletMap.registerOutlet(name?name:PRIMARY_OUTLET,this)}return Object.defineProperty(RouterOutlet.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(RouterOutlet.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(RouterOutlet.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),RouterOutlet.prototype.deactivate=function(){this.activated&&(this.activated.destroy(),this.activated=null)},RouterOutlet.prototype.activate=function(activatedRoute,providers,outletMap){this.outletMap=outletMap,this._activatedRoute=activatedRoute;var factory,snapshot=activatedRoute._futureSnapshot,component=snapshot._routeConfig.component;try{factory="string"==typeof component?snapshot._resolvedComponentFactory:this.componentFactoryResolver.resolveComponentFactory(component)}catch(e){if(!(e instanceof _angular_core.NoComponentFactoryError))throw e;factory=snapshot._resolvedComponentFactory}var inj=_angular_core.ReflectiveInjector.fromResolvedProviders(providers,this.location.parentInjector);this.activated=this.location.createComponent(factory,this.location.length,inj,[])},RouterOutlet}();RouterOutlet.decorators=[{type:_angular_core.Directive,args:[{selector:"router-outlet"}]}],RouterOutlet.ctorParameters=[{type:RouterOutletMap},{type:_angular_core.ViewContainerRef},{type:_angular_core.ComponentFactoryResolver
},{type:void 0,decorators:[{type:_angular_core.Attribute,args:["name"]}]}];var ROUTER_CONFIG=new _angular_core.OpaqueToken("ROUTER_CONFIG"),ROUTER_OPTIONS=new _angular_core.OpaqueToken("ROUTER_OPTIONS"),ROUTER_DIRECTIVES=[RouterOutlet,RouterLink,RouterLinkWithHref,RouterLinkActive];exports.ROUTER_DIRECTIVES=ROUTER_DIRECTIVES,exports.RouterLink=RouterLink,exports.RouterLinkWithHref=RouterLinkWithHref,exports.RouterLinkActive=RouterLinkActive,exports.RouterOutlet=RouterOutlet,exports.NavigationCancel=NavigationCancel,exports.NavigationEnd=NavigationEnd,exports.NavigationError=NavigationError,exports.NavigationStart=NavigationStart,exports.Router=Router,exports.RoutesRecognized=RoutesRecognized,exports.RouterOutletMap=RouterOutletMap,exports.provideRouter=provideRouter,exports.ActivatedRoute=ActivatedRoute,exports.ActivatedRouteSnapshot=ActivatedRouteSnapshot,exports.RouterState=RouterState,exports.RouterStateSnapshot=RouterStateSnapshot,exports.PRIMARY_OUTLET=PRIMARY_OUTLET,exports.DefaultUrlSerializer=DefaultUrlSerializer,exports.UrlPathWithParams=UrlPathWithParams,exports.UrlSerializer=UrlSerializer,exports.UrlTree=UrlTree});